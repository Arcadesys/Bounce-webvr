"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "components_BounceScene_js";
exports.ids = ["components_BounceScene_js"];
exports.modules = {

/***/ "./components/BounceScene.js":
/*!***********************************!*\
  !*** ./components/BounceScene.js ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BounceScene)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"three\");\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! cannon-es */ \"cannon-es\");\n/* harmony import */ var cannon_es__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(cannon_es__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/midiSequencer */ \"./utils/midiSequencer.js\");\n/* harmony import */ var _NoteDisplay__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./NoteDisplay */ \"./components/NoteDisplay.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([three__WEBPACK_IMPORTED_MODULE_2__]);\nthree__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Import the MIDI sequencer utilities\n\n\nfunction BounceScene() {\n    const mountRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Reference to contact material for accessing in slider handler\n    const contactMaterialRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Store platform material for access from slider handler\n    const platformMaterialRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // State for note display\n    const [isDrawing, setIsDrawing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [wallLength, setWallLength] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (true) return;\n        // Scene variables\n        let scene, camera, renderer;\n        let world;\n        let balls = [];\n        let walls = [];\n        let wallBodies = [];\n        let isDrawingInternal = false;\n        let wallStart = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n        let wallEnd = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n        let currentWallMesh = null;\n        let audioContext;\n        let soundEnabled = true;\n        // Define physics materials inside the useEffect\n        const ballMaterial = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Material(\"ballMaterial\");\n        ballMaterial.friction = 0.3;\n        ballMaterial.restitution = 0.7; // Default ball restitution\n        const platformMaterial = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Material(\"platformMaterial\");\n        platformMaterial.friction = 0.1; // Low friction for platforms\n        platformMaterial.restitution = 0.5; // Default platform restitution (will be controlled by slider)\n        // Store in ref for access outside useEffect\n        platformMaterialRef.current = platformMaterial;\n        // Keep track of the shared platform material contact properties\n        let ballPlatformContactMaterial;\n        // Audio context for sound effects\n        function initAudio() {\n            audioContext = new (window.AudioContext || window.webkitAudioContext)();\n            // Create success sound function\n            window.playBounceSound = (intensity = 1.0)=>{\n                if (!soundEnabled || !audioContext) return;\n                const oscillator = audioContext.createOscillator();\n                const gainNode = audioContext.createGain();\n                oscillator.type = \"sine\";\n                oscillator.frequency.setValueAtTime(300 + intensity * 200, audioContext.currentTime);\n                oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.1);\n                gainNode.gain.setValueAtTime(intensity * 0.3, audioContext.currentTime);\n                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.2);\n                oscillator.connect(gainNode);\n                gainNode.connect(audioContext.destination);\n                oscillator.start();\n                oscillator.stop(audioContext.currentTime + 0.2);\n            };\n        }\n        // Initialize Three.js scene\n        function initScene() {\n            // Scene setup\n            scene = new three__WEBPACK_IMPORTED_MODULE_2__.Scene();\n            scene.background = new three__WEBPACK_IMPORTED_MODULE_2__.Color(0x000000); // Black background\n            // Camera setup\n            camera = new three__WEBPACK_IMPORTED_MODULE_2__.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n            camera.position.z = 5;\n            // Renderer setup\n            renderer = new three__WEBPACK_IMPORTED_MODULE_2__.WebGLRenderer({\n                antialias: true\n            });\n            renderer.setSize(window.innerWidth, window.innerHeight);\n            renderer.shadowMap.enabled = true;\n            mountRef.current.appendChild(renderer.domElement);\n            // Lighting\n            const ambientLight = new three__WEBPACK_IMPORTED_MODULE_2__.AmbientLight(0xffffff, 0.5);\n            scene.add(ambientLight);\n            const directionalLight = new three__WEBPACK_IMPORTED_MODULE_2__.DirectionalLight(0xffffff, 0.8);\n            directionalLight.position.set(10, 20, 15);\n            directionalLight.castShadow = true;\n            directionalLight.shadow.mapSize.width = 2048;\n            directionalLight.shadow.mapSize.height = 2048;\n            scene.add(directionalLight);\n        }\n        // Initialize physics world\n        function initPhysics() {\n            world = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.World({\n                gravity: new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Vec3(0, -9.82, 0)\n            });\n            // Add contact material between balls and platforms\n            ballPlatformContactMaterial = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.ContactMaterial(ballMaterial, platformMaterial, {\n                friction: 0.0,\n                restitution: platformMaterial.restitution\n            });\n            // Store in ref for access outside useEffect\n            contactMaterialRef.current = ballPlatformContactMaterial;\n            world.addContactMaterial(ballPlatformContactMaterial);\n            // Ground plane - invisible physics plane\n            const groundBody = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Body({\n                type: cannon_es__WEBPACK_IMPORTED_MODULE_3__.Body.STATIC,\n                shape: new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Plane(),\n                material: platformMaterial // Assign platform material\n            });\n            groundBody.quaternion.setFromAxisAngle(new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Vec3(1, 0, 0), -Math.PI / 2);\n            groundBody.position.y = -2;\n            groundBody.userData = {\n                isGround: true\n            }; // Add userData for identification\n            world.addBody(groundBody);\n            // Visible ground plane\n            const groundGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.PlaneGeometry(10, 10);\n            const groundMaterial = new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n                color: 0x228B22,\n                roughness: 0.7,\n                metalness: 0.1\n            });\n            const ground = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(groundGeometry, groundMaterial);\n            ground.rotation.x = -Math.PI / 2;\n            ground.position.y = -2;\n            ground.receiveShadow = true;\n            ground.userData = {\n                isGround: true\n            }; // Add userData for identification\n            scene.add(ground);\n        }\n        // Create a ball at the specified position\n        function createBall(position) {\n            const radius = 0.2;\n            // Physical body\n            const ballBody = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Body({\n                mass: 1,\n                shape: new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Sphere(radius),\n                position: new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Vec3(position.x, position.y, position.z),\n                linearDamping: 0.1,\n                material: ballMaterial // Assign ball material\n            });\n            world.addBody(ballBody);\n            // Listen for collision events to play sounds\n            ballBody.addEventListener(\"collide\", (event)=>{\n                const relativeVelocity = event.contact.getImpactVelocityAlongNormal();\n                // Get the other colliding body\n                const otherBody = event.body === ballBody ? event.target : event.body;\n                // Check if colliding with a wall that has note information\n                if (otherBody.userData && otherBody.userData.note && Math.abs(relativeVelocity) > 0.5) {\n                    // Play the note associated with the wall\n                    if (audioContext && soundEnabled) {\n                        // Velocity affects volume\n                        const intensity = Math.min(Math.abs(relativeVelocity) / 10, 1);\n                        (0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__.playNoteForLength)(audioContext, otherBody.userData.length, 0.5, intensity * 0.5);\n                    }\n                } else if (Math.abs(relativeVelocity) > 0.5) {\n                    const intensity = Math.min(Math.abs(relativeVelocity) / 10, 1);\n                    window.playBounceSound(intensity);\n                }\n                // If collided with ground, mark for removal\n                if (otherBody.userData && otherBody.userData.isGround) {\n                    ballBody.userData = ballBody.userData || {};\n                    ballBody.userData.shouldRemove = true;\n                }\n            });\n            // Visual ball\n            const ballGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry(radius, 32, 32);\n            const visualBallMaterial = new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n                color: Math.random() * 0xffffff,\n                roughness: 0.4,\n                metalness: 0.3\n            });\n            const ballMesh = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(ballGeometry, visualBallMaterial);\n            ballMesh.castShadow = true;\n            ballMesh.receiveShadow = true;\n            scene.add(ballMesh);\n            return {\n                body: ballBody,\n                mesh: ballMesh\n            };\n        }\n        // Create a wall between two points\n        function createWall(start, end) {\n            // Calculate wall properties\n            const direction = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3().subVectors(end, start);\n            const length = direction.length();\n            const center = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(start, end).multiplyScalar(0.5);\n            // Update state for NoteDisplay component\n            setWallLength(length);\n            // Calculate rotation to align with direction\n            const wallDirection = direction.clone().normalize();\n            const angle = Math.atan2(direction.y, direction.x);\n            // Get note based on current length\n            const note = (0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__.mapLengthToNote)(length);\n            const noteColor = (0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__.getNoteColor)(note);\n            // Add visible spheres at the endpoints for debugging\n            const sphereGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry(0.1, 16, 16);\n            const startSphere = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(sphereGeometry, new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n                color: 0xff0000\n            }));\n            const endSphere = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(sphereGeometry, new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n                color: 0x00ff00\n            }));\n            startSphere.position.copy(start);\n            endSphere.position.copy(end);\n            scene.add(startSphere);\n            scene.add(endSphere);\n            console.log(\"Creating beam from:\", start, \"to:\", end);\n            console.log(\"Angle:\", angle * (180 / Math.PI), \"degrees\");\n            // Create physical wall\n            const wallShape = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Box(new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Vec3(length / 2, 0.5, 0.1));\n            const wallBody = new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Body({\n                mass: 0,\n                position: new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Vec3(center.x, center.y, center.z),\n                shape: wallShape,\n                material: platformMaterial // Assign platform material\n            });\n            // Store note information with the wall body for collision handling\n            wallBody.userData = {\n                note: note,\n                length: length\n            };\n            // Rotate to match visual representation\n            wallBody.quaternion.setFromAxisAngle(new cannon_es__WEBPACK_IMPORTED_MODULE_3__.Vec3(0, 0, 1), angle);\n            world.addBody(wallBody);\n            wallBodies.push(wallBody);\n            // Create visual wall\n            const wallGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.BoxGeometry(length, 0.2, 0.2);\n            const wallMaterial = new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n                color: noteColor,\n                roughness: 0.8,\n                metalness: 0.2\n            });\n            const wallMesh = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(wallGeometry, wallMaterial);\n            wallMesh.position.copy(center);\n            wallMesh.rotation.z = angle;\n            wallMesh.castShadow = true;\n            wallMesh.receiveShadow = true;\n            scene.add(wallMesh);\n            // Store all visual elements\n            walls.push(wallMesh, startSphere, endSphere);\n            // Play the note when the wall is created\n            if (audioContext && soundEnabled) {\n                (0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__.playNoteForLength)(audioContext, length, 0.5, 0.3);\n            }\n            return {\n                body: wallBody,\n                mesh: wallMesh,\n                note: note\n            };\n        }\n        // Update temporary wall while drawing\n        function updateTempWall() {\n            if (currentWallMesh) {\n                scene.remove(currentWallMesh);\n                currentWallMesh = null;\n            }\n            const direction = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3().subVectors(wallEnd, wallStart);\n            const length = direction.length();\n            const center = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(wallStart, wallEnd).multiplyScalar(0.5);\n            // Update state for NoteDisplay component\n            setWallLength(length);\n            // If points are too close, don't draw anything\n            if (length < 0.1) return;\n            const wallDirection = direction.clone().normalize();\n            const angle = Math.atan2(direction.y, direction.x);\n            // Get note based on current length\n            const note = (0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__.mapLengthToNote)(length);\n            const noteColor = (0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_4__.getNoteColor)(note);\n            // Create wall preview\n            const wallGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.BoxGeometry(length, 0.2, 0.2);\n            const wallMaterial = new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n                color: noteColor,\n                transparent: true,\n                opacity: 0.7,\n                roughness: 0.8\n            });\n            currentWallMesh = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(wallGeometry, wallMaterial);\n            currentWallMesh.position.copy(center);\n            currentWallMesh.rotation.z = angle;\n            scene.add(currentWallMesh);\n        }\n        // Raycaster for mouse interaction\n        const raycaster = new three__WEBPACK_IMPORTED_MODULE_2__.Raycaster();\n        const mouse = new three__WEBPACK_IMPORTED_MODULE_2__.Vector2();\n        const drawingPlane = new three__WEBPACK_IMPORTED_MODULE_2__.Plane(new three__WEBPACK_IMPORTED_MODULE_2__.Vector3(0, 0, 1), 0);\n        // Mouse event handlers\n        function onMouseDown(event) {\n            // Get mouse position\n            mouse.x = event.clientX / window.innerWidth * 2 - 1;\n            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n            // Initialize audio on first interaction\n            if (!audioContext) {\n                initAudio();\n            }\n            // Cast ray from mouse position into scene\n            raycaster.setFromCamera(mouse, camera);\n            // If shift is held, start drawing a wall\n            if (event.shiftKey) {\n                isDrawingInternal = true;\n                setIsDrawing(true); // Update state for NoteDisplay\n                // Create debug sphere at click point\n                const markerGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry(0.1, 8, 8);\n                const markerMaterial = new three__WEBPACK_IMPORTED_MODULE_2__.MeshBasicMaterial({\n                    color: 0xff0000\n                });\n                const marker = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(markerGeometry, markerMaterial);\n                const intersection = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                raycaster.ray.intersectPlane(drawingPlane, intersection);\n                marker.position.copy(intersection);\n                scene.add(marker);\n                setTimeout(()=>scene.remove(marker), 2000); // Remove after 2 seconds\n                console.log(\"Mouse DOWN at:\", intersection.x, intersection.y, intersection.z);\n                wallStart = intersection.clone();\n                wallEnd = intersection.clone();\n                updateTempWall();\n            } else {\n                // Otherwise, drop a ball\n                const intersection = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                raycaster.ray.intersectPlane(drawingPlane, intersection);\n                const ball = createBall(intersection);\n                balls.push(ball);\n            }\n        }\n        function onMouseMove(event) {\n            mouse.x = event.clientX / window.innerWidth * 2 - 1;\n            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n            if (isDrawingInternal) {\n                raycaster.setFromCamera(mouse, camera);\n                const intersection = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                raycaster.ray.intersectPlane(drawingPlane, intersection);\n                wallEnd = intersection;\n                updateTempWall();\n            }\n        }\n        function onMouseUp(event) {\n            if (isDrawingInternal) {\n                isDrawingInternal = false;\n                setIsDrawing(false); // Update state for NoteDisplay\n                // Get final mouse position\n                mouse.x = event.clientX / window.innerWidth * 2 - 1;\n                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\n                raycaster.setFromCamera(mouse, camera);\n                // Create debug sphere at release point\n                const markerGeometry = new three__WEBPACK_IMPORTED_MODULE_2__.SphereGeometry(0.1, 8, 8);\n                const markerMaterial = new three__WEBPACK_IMPORTED_MODULE_2__.MeshBasicMaterial({\n                    color: 0x00ff00\n                });\n                const marker = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(markerGeometry, markerMaterial);\n                const intersection = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n                raycaster.ray.intersectPlane(drawingPlane, intersection);\n                marker.position.copy(intersection);\n                scene.add(marker);\n                setTimeout(()=>scene.remove(marker), 2000); // Remove after 2 seconds\n                console.log(\"Mouse UP at:\", intersection.x, intersection.y, intersection.z);\n                // Only create a wall if it has some length\n                if (wallStart.distanceTo(wallEnd) > 0.2) {\n                    console.log(\"Creating wall from\", wallStart, \"to\", wallEnd);\n                    createWall(wallStart, wallEnd);\n                    // Remove temporary wall\n                    if (currentWallMesh) {\n                        scene.remove(currentWallMesh);\n                        currentWallMesh = null;\n                    }\n                }\n            }\n        }\n        // Handle window resize\n        function onWindowResize() {\n            camera.aspect = window.innerWidth / window.innerHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(window.innerWidth, window.innerHeight);\n        }\n        // Allow dropping a ball with a touch on mobile\n        function onTouchStart(event) {\n            // Initialize audio on first interaction\n            if (!audioContext) {\n                initAudio();\n            }\n            event.preventDefault();\n            const touch = event.touches[0];\n            mouse.x = touch.clientX / window.innerWidth * 2 - 1;\n            mouse.y = -(touch.clientY / window.innerHeight) * 2 + 1;\n            raycaster.setFromCamera(mouse, camera);\n            const intersection = new three__WEBPACK_IMPORTED_MODULE_2__.Vector3();\n            raycaster.ray.intersectPlane(drawingPlane, intersection);\n            const ball = createBall(intersection);\n            balls.push(ball);\n        }\n        // Toggle sound\n        function toggleSound() {\n            soundEnabled = !soundEnabled;\n            const soundToggle = document.getElementById(\"sound-toggle\");\n            if (soundToggle) {\n                soundToggle.textContent = soundEnabled ? \"\\uD83D\\uDD0A\" : \"\\uD83D\\uDD07\";\n                soundToggle.setAttribute(\"aria-label\", soundEnabled ? \"Sound On\" : \"Sound Off\");\n            }\n            // Initialize audio if not already done\n            if (soundEnabled && !audioContext) {\n                initAudio();\n            }\n        }\n        // Animation loop\n        const timeStep = 1 / 60;\n        function animate() {\n            requestAnimationFrame(animate);\n            // Update physics\n            world.step(timeStep);\n            // Update visual objects to match physics\n            for(let i = 0; i < balls.length; i++){\n                balls[i].mesh.position.copy(balls[i].body.position);\n                balls[i].mesh.quaternion.copy(balls[i].body.quaternion);\n                // Remove balls that hit the ground or fall too far\n                if (balls[i].body.userData && balls[i].body.userData.shouldRemove || balls[i].body.position.y < -10) {\n                    scene.remove(balls[i].mesh);\n                    world.removeBody(balls[i].body);\n                    balls.splice(i, 1);\n                    i--;\n                }\n            }\n            renderer.render(scene, camera);\n        }\n        // Setup the scene\n        initScene();\n        initPhysics();\n        // Add event listeners\n        window.addEventListener(\"mousedown\", onMouseDown);\n        window.addEventListener(\"mousemove\", onMouseMove);\n        window.addEventListener(\"mouseup\", onMouseUp);\n        window.addEventListener(\"resize\", onWindowResize);\n        window.addEventListener(\"touchstart\", onTouchStart);\n        // Setup sound toggle\n        const soundToggle = document.getElementById(\"sound-toggle\");\n        if (soundToggle) {\n            soundToggle.addEventListener(\"click\", toggleSound);\n        }\n        // Start animation loop\n        animate();\n        // Cleanup function\n        return ()=>{\n            // Remove event listeners\n            window.removeEventListener(\"mousedown\", onMouseDown);\n            window.removeEventListener(\"mousemove\", onMouseMove);\n            window.removeEventListener(\"mouseup\", onMouseUp);\n            window.removeEventListener(\"resize\", onWindowResize);\n            window.removeEventListener(\"touchstart\", onTouchStart);\n            // Remove sound toggle listener\n            const soundToggle = document.getElementById(\"sound-toggle\");\n            if (soundToggle) {\n                soundToggle.removeEventListener(\"click\", toggleSound);\n            }\n            // Stop animation frame\n            cancelAnimationFrame(animate);\n            // Dispose renderer\n            if (renderer) {\n                renderer.dispose();\n            }\n            // Remove canvas from DOM\n            if (mountRef.current && renderer && renderer.domElement) {\n                mountRef.current.removeChild(renderer.domElement);\n            }\n        };\n    }, []);\n    // Function to update platform bounciness\n    const handleBouncinessChange = (event)=>{\n        const newRestitution = parseFloat(event.target.value);\n        // Update both the contact material and platform material restitution\n        if (contactMaterialRef.current) {\n            contactMaterialRef.current.restitution = newRestitution;\n        }\n        // Update the platform material's restitution for new contacts\n        if (platformMaterialRef.current) {\n            platformMaterialRef.current.restitution = newRestitution;\n        }\n        // Update display value\n        const display = document.getElementById(\"bounciness-value\");\n        if (display) {\n            display.textContent = newRestitution.toFixed(2);\n        }\n        // Play a subtle feedback tone when value changes\n        if (window.playBounceSound) {\n            window.playBounceSound(newRestitution * 0.3);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"scene-container\",\n        ref: mountRef,\n        style: {\n            width: \"100%\",\n            height: \"100vh\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"instructions\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        children: \"Musical Bounce Controls\"\n                    }, void 0, false, {\n                        fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                        lineNumber: 570,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"Click to drop balls\"\n                    }, void 0, false, {\n                        fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                        lineNumber: 571,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"Shift + Click + Drag to create walls\"\n                    }, void 0, false, {\n                        fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                        lineNumber: 572,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        children: \"Wall length determines pitch (2 octaves of C major)\"\n                    }, void 0, false, {\n                        fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                        lineNumber: 573,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"slider-container\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                htmlFor: \"bounciness-slider\",\n                                children: \"Platform Bounciness:\"\n                            }, void 0, false, {\n                                fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                                lineNumber: 575,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"range\",\n                                id: \"bounciness-slider\",\n                                name: \"bounciness\",\n                                min: \"0.1\",\n                                max: \"10.0\",\n                                step: \"0.2\",\n                                defaultValue: \"0.5\",\n                                onChange: handleBouncinessChange,\n                                \"aria-label\": \"Adjust Platform Bounciness\"\n                            }, void 0, false, {\n                                fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                                lineNumber: 576,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                id: \"bounciness-value\",\n                                children: \"0.50\"\n                            }, void 0, false, {\n                                fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                                lineNumber: 587,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                        lineNumber: 574,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                lineNumber: 569,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                id: \"sound-toggle\",\n                \"aria-label\": \"Toggle sound\",\n                children: \"\\uD83D\\uDD0A\"\n            }, void 0, false, {\n                fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                lineNumber: 590,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_NoteDisplay__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                isDrawing: isDrawing,\n                wallLength: wallLength\n            }, void 0, false, {\n                fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n                lineNumber: 591,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/arcades/Code/Bounce-webvr/components/BounceScene.js\",\n        lineNumber: 568,\n        columnNumber: 5\n    }, this);\n}\n// Add some basic styling for the slider\n// Ideally, this would go in a separate CSS file\nconst styles = `\n.slider-container {\n  margin-top: 10px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n#bounciness-slider {\n  width: 150px;\n}\n\n#bounciness-value {\n  min-width: 30px; /* Prevent layout shift */\n  text-align: right;\n}\n\n/* You might need styles for #instructions, #sound-toggle etc. */\n#instructions {\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  background: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 10px;\n  border-radius: 5px;\n  z-index: 10;\n}\n\n#sound-toggle {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  font-size: 1.5em;\n  background: none;\n  border: none;\n  cursor: pointer;\n  z-index: 10;\n}\n`;\n// Inject styles into the head - simple way for this example\nif (false) {}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNLLFdBQVdBO2dCQUFXRSxZQUFZQTs7Ozs7Ozs7Ozs7O0FBR3JEO0FBRUEsd0NBQXdDO0FBQ3hDLGdEQUFnRDtBQUNoRCxNQUFNb08sU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1Q2hCLENBQUM7QUFFRCw0REFBNEQ7QUFDNUQsSUFBSSxLQUFrQixFQUFhLEVBS2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm91bmNlLXdlYnZyLy4vY29tcG9uZW50cy9Cb3VuY2VTY2VuZS5qcz84ZWQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCAqIGFzIENBTk5PTiBmcm9tICdjYW5ub24tZXMnO1xuLy8gSW1wb3J0IHRoZSBNSURJIHNlcXVlbmNlciB1dGlsaXRpZXNcbmltcG9ydCB7IG1hcExlbmd0aFRvTm90ZSwgZ2V0Tm90ZUNvbG9yLCBwbGF5Tm90ZUZvckxlbmd0aCB9IGZyb20gJy4uL3V0aWxzL21pZGlTZXF1ZW5jZXInO1xuaW1wb3J0IE5vdGVEaXNwbGF5IGZyb20gJy4vTm90ZURpc3BsYXknO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCb3VuY2VTY2VuZSgpIHtcbiAgY29uc3QgbW91bnRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIC8vIFJlZmVyZW5jZSB0byBjb250YWN0IG1hdGVyaWFsIGZvciBhY2Nlc3NpbmcgaW4gc2xpZGVyIGhhbmRsZXJcbiAgY29uc3QgY29udGFjdE1hdGVyaWFsUmVmID0gdXNlUmVmKG51bGwpO1xuICAvLyBTdG9yZSBwbGF0Zm9ybSBtYXRlcmlhbCBmb3IgYWNjZXNzIGZyb20gc2xpZGVyIGhhbmRsZXJcbiAgY29uc3QgcGxhdGZvcm1NYXRlcmlhbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgXG4gIC8vIFN0YXRlIGZvciBub3RlIGRpc3BsYXlcbiAgY29uc3QgW2lzRHJhd2luZywgc2V0SXNEcmF3aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3dhbGxMZW5ndGgsIHNldFdhbGxMZW5ndGhdID0gdXNlU3RhdGUoMCk7XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIFxuICAgIC8vIFNjZW5lIHZhcmlhYmxlc1xuICAgIGxldCBzY2VuZSwgY2FtZXJhLCByZW5kZXJlcjtcbiAgICBsZXQgd29ybGQ7XG4gICAgbGV0IGJhbGxzID0gW107XG4gICAgbGV0IHdhbGxzID0gW107XG4gICAgbGV0IHdhbGxCb2RpZXMgPSBbXTtcbiAgICBsZXQgaXNEcmF3aW5nSW50ZXJuYWwgPSBmYWxzZTtcbiAgICBsZXQgd2FsbFN0YXJ0ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICBsZXQgd2FsbEVuZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgbGV0IGN1cnJlbnRXYWxsTWVzaCA9IG51bGw7XG4gICAgbGV0IGF1ZGlvQ29udGV4dDtcbiAgICBsZXQgc291bmRFbmFibGVkID0gdHJ1ZTtcbiAgICBcbiAgICAvLyBEZWZpbmUgcGh5c2ljcyBtYXRlcmlhbHMgaW5zaWRlIHRoZSB1c2VFZmZlY3RcbiAgICBjb25zdCBiYWxsTWF0ZXJpYWwgPSBuZXcgQ0FOTk9OLk1hdGVyaWFsKFwiYmFsbE1hdGVyaWFsXCIpO1xuICAgIGJhbGxNYXRlcmlhbC5mcmljdGlvbiA9IDAuMztcbiAgICBiYWxsTWF0ZXJpYWwucmVzdGl0dXRpb24gPSAwLjc7IC8vIERlZmF1bHQgYmFsbCByZXN0aXR1dGlvblxuICAgIFxuICAgIGNvbnN0IHBsYXRmb3JtTWF0ZXJpYWwgPSBuZXcgQ0FOTk9OLk1hdGVyaWFsKFwicGxhdGZvcm1NYXRlcmlhbFwiKTtcbiAgICBwbGF0Zm9ybU1hdGVyaWFsLmZyaWN0aW9uID0gMC4xOyAvLyBMb3cgZnJpY3Rpb24gZm9yIHBsYXRmb3Jtc1xuICAgIHBsYXRmb3JtTWF0ZXJpYWwucmVzdGl0dXRpb24gPSAwLjU7IC8vIERlZmF1bHQgcGxhdGZvcm0gcmVzdGl0dXRpb24gKHdpbGwgYmUgY29udHJvbGxlZCBieSBzbGlkZXIpXG4gICAgXG4gICAgLy8gU3RvcmUgaW4gcmVmIGZvciBhY2Nlc3Mgb3V0c2lkZSB1c2VFZmZlY3RcbiAgICBwbGF0Zm9ybU1hdGVyaWFsUmVmLmN1cnJlbnQgPSBwbGF0Zm9ybU1hdGVyaWFsO1xuICAgIFxuICAgIC8vIEtlZXAgdHJhY2sgb2YgdGhlIHNoYXJlZCBwbGF0Zm9ybSBtYXRlcmlhbCBjb250YWN0IHByb3BlcnRpZXNcbiAgICBsZXQgYmFsbFBsYXRmb3JtQ29udGFjdE1hdGVyaWFsO1xuICAgIFxuICAgIC8vIEF1ZGlvIGNvbnRleHQgZm9yIHNvdW5kIGVmZmVjdHNcbiAgICBmdW5jdGlvbiBpbml0QXVkaW8oKSB7XG4gICAgICBhdWRpb0NvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHN1Y2Nlc3Mgc291bmQgZnVuY3Rpb25cbiAgICAgIHdpbmRvdy5wbGF5Qm91bmNlU291bmQgPSAoaW50ZW5zaXR5ID0gMS4wKSA9PiB7XG4gICAgICAgIGlmICghc291bmRFbmFibGVkIHx8ICFhdWRpb0NvbnRleHQpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG9zY2lsbGF0b3IgPSBhdWRpb0NvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xuICAgICAgICBjb25zdCBnYWluTm9kZSA9IGF1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIFxuICAgICAgICBvc2NpbGxhdG9yLnR5cGUgPSAnc2luZSc7XG4gICAgICAgIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDMwMCArIGludGVuc2l0eSAqIDIwMCwgYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgb3NjaWxsYXRvci5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgyMDAsIGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSArIDAuMSk7XG4gICAgICAgIFxuICAgICAgICBnYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKGludGVuc2l0eSAqIDAuMywgYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCBhdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyAwLjIpO1xuICAgICAgICBcbiAgICAgICAgb3NjaWxsYXRvci5jb25uZWN0KGdhaW5Ob2RlKTtcbiAgICAgICAgZ2Fpbk5vZGUuY29ubmVjdChhdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgICAgICBcbiAgICAgICAgb3NjaWxsYXRvci5zdGFydCgpO1xuICAgICAgICBvc2NpbGxhdG9yLnN0b3AoYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICsgMC4yKTtcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgVGhyZWUuanMgc2NlbmVcbiAgICBmdW5jdGlvbiBpbml0U2NlbmUoKSB7XG4gICAgICAvLyBTY2VuZSBzZXR1cFxuICAgICAgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTtcbiAgICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHgwMDAwMDApOyAvLyBCbGFjayBiYWNrZ3JvdW5kXG4gICAgICBcbiAgICAgIC8vIENhbWVyYSBzZXR1cFxuICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDc1LCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMC4xLCAxMDAwKTtcbiAgICAgIGNhbWVyYS5wb3NpdGlvbi56ID0gNTtcbiAgICAgIFxuICAgICAgLy8gUmVuZGVyZXIgc2V0dXBcbiAgICAgIHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7XG4gICAgICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgcmVuZGVyZXIuc2hhZG93TWFwLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgbW91bnRSZWYuY3VycmVudC5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcbiAgICAgIFxuICAgICAgLy8gTGlnaHRpbmdcbiAgICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDAuNSk7XG4gICAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcbiAgICAgIFxuICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmLCAwLjgpO1xuICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoMTAsIDIwLCAxNSk7XG4gICAgICBkaXJlY3Rpb25hbExpZ2h0LmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgZGlyZWN0aW9uYWxMaWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IDIwNDg7XG4gICAgICBkaXJlY3Rpb25hbExpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IDIwNDg7XG4gICAgICBzY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWxpemUgcGh5c2ljcyB3b3JsZFxuICAgIGZ1bmN0aW9uIGluaXRQaHlzaWNzKCkge1xuICAgICAgd29ybGQgPSBuZXcgQ0FOTk9OLldvcmxkKHtcbiAgICAgICAgZ3Jhdml0eTogbmV3IENBTk5PTi5WZWMzKDAsIC05LjgyLCAwKVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gYmFsbHMgYW5kIHBsYXRmb3Jtc1xuICAgICAgYmFsbFBsYXRmb3JtQ29udGFjdE1hdGVyaWFsID0gbmV3IENBTk5PTi5Db250YWN0TWF0ZXJpYWwoXG4gICAgICAgIGJhbGxNYXRlcmlhbCxcbiAgICAgICAgcGxhdGZvcm1NYXRlcmlhbCxcbiAgICAgICAge1xuICAgICAgICAgIGZyaWN0aW9uOiAwLjAsIC8vIExvdyBmcmljdGlvbiBiZXR3ZWVuIGJhbGwgYW5kIHBsYXRmb3JtXG4gICAgICAgICAgcmVzdGl0dXRpb246IHBsYXRmb3JtTWF0ZXJpYWwucmVzdGl0dXRpb24sIC8vIFVzZSB0aGUgcGxhdGZvcm0ncyByZXN0aXR1dGlvblxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgLy8gU3RvcmUgaW4gcmVmIGZvciBhY2Nlc3Mgb3V0c2lkZSB1c2VFZmZlY3RcbiAgICAgIGNvbnRhY3RNYXRlcmlhbFJlZi5jdXJyZW50ID0gYmFsbFBsYXRmb3JtQ29udGFjdE1hdGVyaWFsO1xuICAgICAgd29ybGQuYWRkQ29udGFjdE1hdGVyaWFsKGJhbGxQbGF0Zm9ybUNvbnRhY3RNYXRlcmlhbCk7XG4gICAgICBcbiAgICAgIC8vIEdyb3VuZCBwbGFuZSAtIGludmlzaWJsZSBwaHlzaWNzIHBsYW5lXG4gICAgICBjb25zdCBncm91bmRCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHtcbiAgICAgICAgdHlwZTogQ0FOTk9OLkJvZHkuU1RBVElDLFxuICAgICAgICBzaGFwZTogbmV3IENBTk5PTi5QbGFuZSgpLFxuICAgICAgICBtYXRlcmlhbDogcGxhdGZvcm1NYXRlcmlhbCAvLyBBc3NpZ24gcGxhdGZvcm0gbWF0ZXJpYWxcbiAgICAgIH0pO1xuICAgICAgZ3JvdW5kQm9keS5xdWF0ZXJuaW9uLnNldEZyb21BeGlzQW5nbGUobmV3IENBTk5PTi5WZWMzKDEsIDAsIDApLCAtTWF0aC5QSSAvIDIpO1xuICAgICAgZ3JvdW5kQm9keS5wb3NpdGlvbi55ID0gLTI7XG4gICAgICBncm91bmRCb2R5LnVzZXJEYXRhID0geyBpc0dyb3VuZDogdHJ1ZSB9OyAvLyBBZGQgdXNlckRhdGEgZm9yIGlkZW50aWZpY2F0aW9uXG4gICAgICB3b3JsZC5hZGRCb2R5KGdyb3VuZEJvZHkpO1xuICAgICAgXG4gICAgICAvLyBWaXNpYmxlIGdyb3VuZCBwbGFuZVxuICAgICAgY29uc3QgZ3JvdW5kR2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVHZW9tZXRyeSgxMCwgMTApO1xuICAgICAgY29uc3QgZ3JvdW5kTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBcbiAgICAgICAgY29sb3I6IDB4MjI4QjIyLFxuICAgICAgICByb3VnaG5lc3M6IDAuNyxcbiAgICAgICAgbWV0YWxuZXNzOiAwLjFcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZ3JvdW5kID0gbmV3IFRIUkVFLk1lc2goZ3JvdW5kR2VvbWV0cnksIGdyb3VuZE1hdGVyaWFsKTtcbiAgICAgIGdyb3VuZC5yb3RhdGlvbi54ID0gLU1hdGguUEkgLyAyO1xuICAgICAgZ3JvdW5kLnBvc2l0aW9uLnkgPSAtMjtcbiAgICAgIGdyb3VuZC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgICAgIGdyb3VuZC51c2VyRGF0YSA9IHsgaXNHcm91bmQ6IHRydWUgfTsgLy8gQWRkIHVzZXJEYXRhIGZvciBpZGVudGlmaWNhdGlvblxuICAgICAgc2NlbmUuYWRkKGdyb3VuZCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIGJhbGwgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJhbGwocG9zaXRpb24pIHtcbiAgICAgIGNvbnN0IHJhZGl1cyA9IDAuMjtcbiAgICAgIFxuICAgICAgLy8gUGh5c2ljYWwgYm9keVxuICAgICAgY29uc3QgYmFsbEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoe1xuICAgICAgICBtYXNzOiAxLFxuICAgICAgICBzaGFwZTogbmV3IENBTk5PTi5TcGhlcmUocmFkaXVzKSxcbiAgICAgICAgcG9zaXRpb246IG5ldyBDQU5OT04uVmVjMyhwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KSxcbiAgICAgICAgbGluZWFyRGFtcGluZzogMC4xLFxuICAgICAgICBtYXRlcmlhbDogYmFsbE1hdGVyaWFsIC8vIEFzc2lnbiBiYWxsIG1hdGVyaWFsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgd29ybGQuYWRkQm9keShiYWxsQm9keSk7XG4gICAgICBcbiAgICAgIC8vIExpc3RlbiBmb3IgY29sbGlzaW9uIGV2ZW50cyB0byBwbGF5IHNvdW5kc1xuICAgICAgYmFsbEJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY29sbGlkZScsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCByZWxhdGl2ZVZlbG9jaXR5ID0gZXZlbnQuY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIG90aGVyIGNvbGxpZGluZyBib2R5XG4gICAgICAgIGNvbnN0IG90aGVyQm9keSA9IGV2ZW50LmJvZHkgPT09IGJhbGxCb2R5ID8gZXZlbnQudGFyZ2V0IDogZXZlbnQuYm9keTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIGNvbGxpZGluZyB3aXRoIGEgd2FsbCB0aGF0IGhhcyBub3RlIGluZm9ybWF0aW9uXG4gICAgICAgIGlmIChvdGhlckJvZHkudXNlckRhdGEgJiYgb3RoZXJCb2R5LnVzZXJEYXRhLm5vdGUgJiYgTWF0aC5hYnMocmVsYXRpdmVWZWxvY2l0eSkgPiAwLjUpIHtcbiAgICAgICAgICAvLyBQbGF5IHRoZSBub3RlIGFzc29jaWF0ZWQgd2l0aCB0aGUgd2FsbFxuICAgICAgICAgIGlmIChhdWRpb0NvbnRleHQgJiYgc291bmRFbmFibGVkKSB7XG4gICAgICAgICAgICAvLyBWZWxvY2l0eSBhZmZlY3RzIHZvbHVtZVxuICAgICAgICAgICAgY29uc3QgaW50ZW5zaXR5ID0gTWF0aC5taW4oTWF0aC5hYnMocmVsYXRpdmVWZWxvY2l0eSkgLyAxMCwgMSk7XG4gICAgICAgICAgICBwbGF5Tm90ZUZvckxlbmd0aChhdWRpb0NvbnRleHQsIG90aGVyQm9keS51c2VyRGF0YS5sZW5ndGgsIDAuNSwgaW50ZW5zaXR5ICogMC41KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gXG4gICAgICAgIC8vIERlZmF1bHQgYm91bmNlIHNvdW5kIGZvciBvdGhlciBjb2xsaXNpb25zXG4gICAgICAgIGVsc2UgaWYgKE1hdGguYWJzKHJlbGF0aXZlVmVsb2NpdHkpID4gMC41KSB7XG4gICAgICAgICAgY29uc3QgaW50ZW5zaXR5ID0gTWF0aC5taW4oTWF0aC5hYnMocmVsYXRpdmVWZWxvY2l0eSkgLyAxMCwgMSk7XG4gICAgICAgICAgd2luZG93LnBsYXlCb3VuY2VTb3VuZChpbnRlbnNpdHkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBjb2xsaWRlZCB3aXRoIGdyb3VuZCwgbWFyayBmb3IgcmVtb3ZhbFxuICAgICAgICBpZiAob3RoZXJCb2R5LnVzZXJEYXRhICYmIG90aGVyQm9keS51c2VyRGF0YS5pc0dyb3VuZCkge1xuICAgICAgICAgIGJhbGxCb2R5LnVzZXJEYXRhID0gYmFsbEJvZHkudXNlckRhdGEgfHwge307XG4gICAgICAgICAgYmFsbEJvZHkudXNlckRhdGEuc2hvdWxkUmVtb3ZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFZpc3VhbCBiYWxsXG4gICAgICBjb25zdCBiYWxsR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkocmFkaXVzLCAzMiwgMzIpO1xuICAgICAgY29uc3QgdmlzdWFsQmFsbE1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgXG4gICAgICAgIGNvbG9yOiBNYXRoLnJhbmRvbSgpICogMHhmZmZmZmYsXG4gICAgICAgIHJvdWdobmVzczogMC40LFxuICAgICAgICBtZXRhbG5lc3M6IDAuM1xuICAgICAgfSk7XG4gICAgICBjb25zdCBiYWxsTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGJhbGxHZW9tZXRyeSwgdmlzdWFsQmFsbE1hdGVyaWFsKTtcbiAgICAgIGJhbGxNZXNoLmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgYmFsbE1lc2gucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG4gICAgICBzY2VuZS5hZGQoYmFsbE1lc2gpO1xuICAgICAgXG4gICAgICByZXR1cm4geyBib2R5OiBiYWxsQm9keSwgbWVzaDogYmFsbE1lc2ggfTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgd2FsbCBiZXR3ZWVuIHR3byBwb2ludHNcbiAgICBmdW5jdGlvbiBjcmVhdGVXYWxsKHN0YXJ0LCBlbmQpIHtcbiAgICAgIC8vIENhbGN1bGF0ZSB3YWxsIHByb3BlcnRpZXNcbiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuc3ViVmVjdG9ycyhlbmQsIHN0YXJ0KTtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGRpcmVjdGlvbi5sZW5ndGgoKTtcbiAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuYWRkVmVjdG9ycyhzdGFydCwgZW5kKS5tdWx0aXBseVNjYWxhcigwLjUpO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgc3RhdGUgZm9yIE5vdGVEaXNwbGF5IGNvbXBvbmVudFxuICAgICAgc2V0V2FsbExlbmd0aChsZW5ndGgpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgcm90YXRpb24gdG8gYWxpZ24gd2l0aCBkaXJlY3Rpb25cbiAgICAgIGNvbnN0IHdhbGxEaXJlY3Rpb24gPSBkaXJlY3Rpb24uY2xvbmUoKS5ub3JtYWxpemUoKTtcbiAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngpO1xuICAgICAgXG4gICAgICAvLyBHZXQgbm90ZSBiYXNlZCBvbiBjdXJyZW50IGxlbmd0aFxuICAgICAgY29uc3Qgbm90ZSA9IG1hcExlbmd0aFRvTm90ZShsZW5ndGgpO1xuICAgICAgY29uc3Qgbm90ZUNvbG9yID0gZ2V0Tm90ZUNvbG9yKG5vdGUpO1xuICAgICAgXG4gICAgICAvLyBBZGQgdmlzaWJsZSBzcGhlcmVzIGF0IHRoZSBlbmRwb2ludHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc3Qgc3BoZXJlR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4xLCAxNiwgMTYpO1xuICAgICAgY29uc3Qgc3RhcnRTcGhlcmUgPSBuZXcgVEhSRUUuTWVzaChzcGhlcmVHZW9tZXRyeSwgbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4ZmYwMDAwIH0pKTtcbiAgICAgIGNvbnN0IGVuZFNwaGVyZSA9IG5ldyBUSFJFRS5NZXNoKHNwaGVyZUdlb21ldHJ5LCBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHgwMGZmMDAgfSkpO1xuICAgICAgXG4gICAgICBzdGFydFNwaGVyZS5wb3NpdGlvbi5jb3B5KHN0YXJ0KTtcbiAgICAgIGVuZFNwaGVyZS5wb3NpdGlvbi5jb3B5KGVuZCk7XG4gICAgICBzY2VuZS5hZGQoc3RhcnRTcGhlcmUpO1xuICAgICAgc2NlbmUuYWRkKGVuZFNwaGVyZSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgYmVhbSBmcm9tOlwiLCBzdGFydCwgXCJ0bzpcIiwgZW5kKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiQW5nbGU6XCIsIGFuZ2xlICogKDE4MC9NYXRoLlBJKSwgXCJkZWdyZWVzXCIpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgcGh5c2ljYWwgd2FsbFxuICAgICAgY29uc3Qgd2FsbFNoYXBlID0gbmV3IENBTk5PTi5Cb3gobmV3IENBTk5PTi5WZWMzKGxlbmd0aC8yLCAwLjUsIDAuMSkpO1xuICAgICAgY29uc3Qgd2FsbEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoe1xuICAgICAgICBtYXNzOiAwLCAvLyBTdGF0aWMgYm9keVxuICAgICAgICBwb3NpdGlvbjogbmV3IENBTk5PTi5WZWMzKGNlbnRlci54LCBjZW50ZXIueSwgY2VudGVyLnopLFxuICAgICAgICBzaGFwZTogd2FsbFNoYXBlLFxuICAgICAgICBtYXRlcmlhbDogcGxhdGZvcm1NYXRlcmlhbCAvLyBBc3NpZ24gcGxhdGZvcm0gbWF0ZXJpYWxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTdG9yZSBub3RlIGluZm9ybWF0aW9uIHdpdGggdGhlIHdhbGwgYm9keSBmb3IgY29sbGlzaW9uIGhhbmRsaW5nXG4gICAgICB3YWxsQm9keS51c2VyRGF0YSA9IHtcbiAgICAgICAgbm90ZTogbm90ZSxcbiAgICAgICAgbGVuZ3RoOiBsZW5ndGhcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFJvdGF0ZSB0byBtYXRjaCB2aXN1YWwgcmVwcmVzZW50YXRpb25cbiAgICAgIHdhbGxCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUF4aXNBbmdsZShuZXcgQ0FOTk9OLlZlYzMoMCwgMCwgMSksIGFuZ2xlKTtcbiAgICAgIHdvcmxkLmFkZEJvZHkod2FsbEJvZHkpO1xuICAgICAgd2FsbEJvZGllcy5wdXNoKHdhbGxCb2R5KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHZpc3VhbCB3YWxsXG4gICAgICBjb25zdCB3YWxsR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkobGVuZ3RoLCAwLjIsIDAuMik7XG4gICAgICBjb25zdCB3YWxsTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBcbiAgICAgICAgY29sb3I6IG5vdGVDb2xvciwgLy8gVXNlIG5vdGUtYmFzZWQgY29sb3JcbiAgICAgICAgcm91Z2huZXNzOiAwLjgsXG4gICAgICAgIG1ldGFsbmVzczogMC4yXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHdhbGxNZXNoID0gbmV3IFRIUkVFLk1lc2god2FsbEdlb21ldHJ5LCB3YWxsTWF0ZXJpYWwpO1xuICAgICAgd2FsbE1lc2gucG9zaXRpb24uY29weShjZW50ZXIpO1xuICAgICAgd2FsbE1lc2gucm90YXRpb24ueiA9IGFuZ2xlO1xuICAgICAgd2FsbE1lc2guY2FzdFNoYWRvdyA9IHRydWU7XG4gICAgICB3YWxsTWVzaC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgICAgIHNjZW5lLmFkZCh3YWxsTWVzaCk7XG4gICAgICBcbiAgICAgIC8vIFN0b3JlIGFsbCB2aXN1YWwgZWxlbWVudHNcbiAgICAgIHdhbGxzLnB1c2god2FsbE1lc2gsIHN0YXJ0U3BoZXJlLCBlbmRTcGhlcmUpO1xuICAgICAgXG4gICAgICAvLyBQbGF5IHRoZSBub3RlIHdoZW4gdGhlIHdhbGwgaXMgY3JlYXRlZFxuICAgICAgaWYgKGF1ZGlvQ29udGV4dCAmJiBzb3VuZEVuYWJsZWQpIHtcbiAgICAgICAgcGxheU5vdGVGb3JMZW5ndGgoYXVkaW9Db250ZXh0LCBsZW5ndGgsIDAuNSwgMC4zKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHsgYm9keTogd2FsbEJvZHksIG1lc2g6IHdhbGxNZXNoLCBub3RlOiBub3RlIH07XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0ZW1wb3Jhcnkgd2FsbCB3aGlsZSBkcmF3aW5nXG4gICAgZnVuY3Rpb24gdXBkYXRlVGVtcFdhbGwoKSB7XG4gICAgICBpZiAoY3VycmVudFdhbGxNZXNoKSB7XG4gICAgICAgIHNjZW5lLnJlbW92ZShjdXJyZW50V2FsbE1lc2gpO1xuICAgICAgICBjdXJyZW50V2FsbE1lc2ggPSBudWxsO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpLnN1YlZlY3RvcnMod2FsbEVuZCwgd2FsbFN0YXJ0KTtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGRpcmVjdGlvbi5sZW5ndGgoKTtcbiAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBUSFJFRS5WZWN0b3IzKCkuYWRkVmVjdG9ycyh3YWxsU3RhcnQsIHdhbGxFbmQpLm11bHRpcGx5U2NhbGFyKDAuNSk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZSBmb3IgTm90ZURpc3BsYXkgY29tcG9uZW50XG4gICAgICBzZXRXYWxsTGVuZ3RoKGxlbmd0aCk7XG4gICAgICBcbiAgICAgIC8vIElmIHBvaW50cyBhcmUgdG9vIGNsb3NlLCBkb24ndCBkcmF3IGFueXRoaW5nXG4gICAgICBpZiAobGVuZ3RoIDwgMC4xKSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHdhbGxEaXJlY3Rpb24gPSBkaXJlY3Rpb24uY2xvbmUoKS5ub3JtYWxpemUoKTtcbiAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihkaXJlY3Rpb24ueSwgZGlyZWN0aW9uLngpO1xuICAgICAgXG4gICAgICAvLyBHZXQgbm90ZSBiYXNlZCBvbiBjdXJyZW50IGxlbmd0aFxuICAgICAgY29uc3Qgbm90ZSA9IG1hcExlbmd0aFRvTm90ZShsZW5ndGgpO1xuICAgICAgY29uc3Qgbm90ZUNvbG9yID0gZ2V0Tm90ZUNvbG9yKG5vdGUpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgd2FsbCBwcmV2aWV3XG4gICAgICBjb25zdCB3YWxsR2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkobGVuZ3RoLCAwLjIsIDAuMik7XG4gICAgICBjb25zdCB3YWxsTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBcbiAgICAgICAgY29sb3I6IG5vdGVDb2xvciwgLy8gVXNlIG5vdGUtYmFzZWQgY29sb3JcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXG4gICAgICAgIG9wYWNpdHk6IDAuNyxcbiAgICAgICAgcm91Z2huZXNzOiAwLjhcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjdXJyZW50V2FsbE1lc2ggPSBuZXcgVEhSRUUuTWVzaCh3YWxsR2VvbWV0cnksIHdhbGxNYXRlcmlhbCk7XG4gICAgICBjdXJyZW50V2FsbE1lc2gucG9zaXRpb24uY29weShjZW50ZXIpO1xuICAgICAgY3VycmVudFdhbGxNZXNoLnJvdGF0aW9uLnogPSBhbmdsZTtcbiAgICAgIHNjZW5lLmFkZChjdXJyZW50V2FsbE1lc2gpO1xuICAgIH1cbiAgICBcbiAgICAvLyBSYXljYXN0ZXIgZm9yIG1vdXNlIGludGVyYWN0aW9uXG4gICAgY29uc3QgcmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICAgIGNvbnN0IG1vdXNlID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgICBjb25zdCBkcmF3aW5nUGxhbmUgPSBuZXcgVEhSRUUuUGxhbmUobmV3IFRIUkVFLlZlY3RvcjMoMCwgMCwgMSksIDApO1xuICAgIFxuICAgIC8vIE1vdXNlIGV2ZW50IGhhbmRsZXJzXG4gICAgZnVuY3Rpb24gb25Nb3VzZURvd24oZXZlbnQpIHtcbiAgICAgIC8vIEdldCBtb3VzZSBwb3NpdGlvblxuICAgICAgbW91c2UueCA9IChldmVudC5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGgpICogMiAtIDE7XG4gICAgICBtb3VzZS55ID0gLShldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0KSAqIDIgKyAxO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIGF1ZGlvIG9uIGZpcnN0IGludGVyYWN0aW9uXG4gICAgICBpZiAoIWF1ZGlvQ29udGV4dCkge1xuICAgICAgICBpbml0QXVkaW8oKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2FzdCByYXkgZnJvbSBtb3VzZSBwb3NpdGlvbiBpbnRvIHNjZW5lXG4gICAgICByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSwgY2FtZXJhKTtcbiAgICAgIFxuICAgICAgLy8gSWYgc2hpZnQgaXMgaGVsZCwgc3RhcnQgZHJhd2luZyBhIHdhbGxcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICBpc0RyYXdpbmdJbnRlcm5hbCA9IHRydWU7XG4gICAgICAgIHNldElzRHJhd2luZyh0cnVlKTsgLy8gVXBkYXRlIHN0YXRlIGZvciBOb3RlRGlzcGxheVxuICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGRlYnVnIHNwaGVyZSBhdCBjbGljayBwb2ludFxuICAgICAgICBjb25zdCBtYXJrZXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgwLjEsIDgsIDgpO1xuICAgICAgICBjb25zdCBtYXJrZXJNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IGNvbG9yOiAweGZmMDAwMCB9KTtcbiAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IFRIUkVFLk1lc2gobWFya2VyR2VvbWV0cnksIG1hcmtlck1hdGVyaWFsKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgIHJheWNhc3Rlci5yYXkuaW50ZXJzZWN0UGxhbmUoZHJhd2luZ1BsYW5lLCBpbnRlcnNlY3Rpb24pO1xuICAgICAgICBcbiAgICAgICAgbWFya2VyLnBvc2l0aW9uLmNvcHkoaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgc2NlbmUuYWRkKG1hcmtlcik7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2NlbmUucmVtb3ZlKG1hcmtlciksIDIwMDApOyAvLyBSZW1vdmUgYWZ0ZXIgMiBzZWNvbmRzXG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIk1vdXNlIERPV04gYXQ6XCIsIGludGVyc2VjdGlvbi54LCBpbnRlcnNlY3Rpb24ueSwgaW50ZXJzZWN0aW9uLnopO1xuICAgICAgICBcbiAgICAgICAgd2FsbFN0YXJ0ID0gaW50ZXJzZWN0aW9uLmNsb25lKCk7XG4gICAgICAgIHdhbGxFbmQgPSBpbnRlcnNlY3Rpb24uY2xvbmUoKTtcbiAgICAgICAgdXBkYXRlVGVtcFdhbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgZHJvcCBhIGJhbGxcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgcmF5Y2FzdGVyLnJheS5pbnRlcnNlY3RQbGFuZShkcmF3aW5nUGxhbmUsIGludGVyc2VjdGlvbik7XG4gICAgICAgIGNvbnN0IGJhbGwgPSBjcmVhdGVCYWxsKGludGVyc2VjdGlvbik7XG4gICAgICAgIGJhbGxzLnB1c2goYmFsbCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIG9uTW91c2VNb3ZlKGV2ZW50KSB7XG4gICAgICBtb3VzZS54ID0gKGV2ZW50LmNsaWVudFggLyB3aW5kb3cuaW5uZXJXaWR0aCkgKiAyIC0gMTtcbiAgICAgIG1vdXNlLnkgPSAtKGV2ZW50LmNsaWVudFkgLyB3aW5kb3cuaW5uZXJIZWlnaHQpICogMiArIDE7XG4gICAgICBcbiAgICAgIGlmIChpc0RyYXdpbmdJbnRlcm5hbCkge1xuICAgICAgICByYXljYXN0ZXIuc2V0RnJvbUNhbWVyYShtb3VzZSwgY2FtZXJhKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICAgICAgcmF5Y2FzdGVyLnJheS5pbnRlcnNlY3RQbGFuZShkcmF3aW5nUGxhbmUsIGludGVyc2VjdGlvbik7XG4gICAgICAgIHdhbGxFbmQgPSBpbnRlcnNlY3Rpb247XG4gICAgICAgIHVwZGF0ZVRlbXBXYWxsKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIG9uTW91c2VVcChldmVudCkge1xuICAgICAgaWYgKGlzRHJhd2luZ0ludGVybmFsKSB7XG4gICAgICAgIGlzRHJhd2luZ0ludGVybmFsID0gZmFsc2U7XG4gICAgICAgIHNldElzRHJhd2luZyhmYWxzZSk7IC8vIFVwZGF0ZSBzdGF0ZSBmb3IgTm90ZURpc3BsYXlcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBmaW5hbCBtb3VzZSBwb3NpdGlvblxuICAgICAgICBtb3VzZS54ID0gKGV2ZW50LmNsaWVudFggLyB3aW5kb3cuaW5uZXJXaWR0aCkgKiAyIC0gMTtcbiAgICAgICAgbW91c2UueSA9IC0oZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiAyICsgMTtcbiAgICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgZGVidWcgc3BoZXJlIGF0IHJlbGVhc2UgcG9pbnRcbiAgICAgICAgY29uc3QgbWFya2VyR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4xLCA4LCA4KTtcbiAgICAgICAgY29uc3QgbWFya2VyTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHgwMGZmMDAgfSk7XG4gICAgICAgIGNvbnN0IG1hcmtlciA9IG5ldyBUSFJFRS5NZXNoKG1hcmtlckdlb21ldHJ5LCBtYXJrZXJNYXRlcmlhbCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICByYXljYXN0ZXIucmF5LmludGVyc2VjdFBsYW5lKGRyYXdpbmdQbGFuZSwgaW50ZXJzZWN0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIG1hcmtlci5wb3NpdGlvbi5jb3B5KGludGVyc2VjdGlvbik7XG4gICAgICAgIHNjZW5lLmFkZChtYXJrZXIpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNjZW5lLnJlbW92ZShtYXJrZXIpLCAyMDAwKTsgLy8gUmVtb3ZlIGFmdGVyIDIgc2Vjb25kc1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJNb3VzZSBVUCBhdDpcIiwgaW50ZXJzZWN0aW9uLngsIGludGVyc2VjdGlvbi55LCBpbnRlcnNlY3Rpb24ueik7XG4gICAgICAgIFxuICAgICAgICAvLyBPbmx5IGNyZWF0ZSBhIHdhbGwgaWYgaXQgaGFzIHNvbWUgbGVuZ3RoXG4gICAgICAgIGlmICh3YWxsU3RhcnQuZGlzdGFuY2VUbyh3YWxsRW5kKSA+IDAuMikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgd2FsbCBmcm9tXCIsIHdhbGxTdGFydCwgXCJ0b1wiLCB3YWxsRW5kKTtcbiAgICAgICAgICBjcmVhdGVXYWxsKHdhbGxTdGFydCwgd2FsbEVuZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVtb3ZlIHRlbXBvcmFyeSB3YWxsXG4gICAgICAgICAgaWYgKGN1cnJlbnRXYWxsTWVzaCkge1xuICAgICAgICAgICAgc2NlbmUucmVtb3ZlKGN1cnJlbnRXYWxsTWVzaCk7XG4gICAgICAgICAgICBjdXJyZW50V2FsbE1lc2ggPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgd2luZG93IHJlc2l6ZVxuICAgIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgICAgY2FtZXJhLmFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgIHJlbmRlcmVyLnNldFNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFsbG93IGRyb3BwaW5nIGEgYmFsbCB3aXRoIGEgdG91Y2ggb24gbW9iaWxlXG4gICAgZnVuY3Rpb24gb25Ub3VjaFN0YXJ0KGV2ZW50KSB7XG4gICAgICAvLyBJbml0aWFsaXplIGF1ZGlvIG9uIGZpcnN0IGludGVyYWN0aW9uXG4gICAgICBpZiAoIWF1ZGlvQ29udGV4dCkge1xuICAgICAgICBpbml0QXVkaW8oKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IHRvdWNoID0gZXZlbnQudG91Y2hlc1swXTtcbiAgICAgIG1vdXNlLnggPSAodG91Y2guY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoKSAqIDIgLSAxO1xuICAgICAgbW91c2UueSA9IC0odG91Y2guY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiAyICsgMTtcbiAgICAgIFxuICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UsIGNhbWVyYSk7XG4gICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgcmF5Y2FzdGVyLnJheS5pbnRlcnNlY3RQbGFuZShkcmF3aW5nUGxhbmUsIGludGVyc2VjdGlvbik7XG4gICAgICBjb25zdCBiYWxsID0gY3JlYXRlQmFsbChpbnRlcnNlY3Rpb24pO1xuICAgICAgYmFsbHMucHVzaChiYWxsKTtcbiAgICB9XG4gICAgXG4gICAgLy8gVG9nZ2xlIHNvdW5kXG4gICAgZnVuY3Rpb24gdG9nZ2xlU291bmQoKSB7XG4gICAgICBzb3VuZEVuYWJsZWQgPSAhc291bmRFbmFibGVkO1xuICAgICAgY29uc3Qgc291bmRUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291bmQtdG9nZ2xlJyk7XG4gICAgICBpZiAoc291bmRUb2dnbGUpIHtcbiAgICAgICAgc291bmRUb2dnbGUudGV4dENvbnRlbnQgPSBzb3VuZEVuYWJsZWQgPyAn8J+UiicgOiAn8J+Uhyc7XG4gICAgICAgIHNvdW5kVG9nZ2xlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHNvdW5kRW5hYmxlZCA/ICdTb3VuZCBPbicgOiAnU291bmQgT2ZmJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgYXVkaW8gaWYgbm90IGFscmVhZHkgZG9uZVxuICAgICAgaWYgKHNvdW5kRW5hYmxlZCAmJiAhYXVkaW9Db250ZXh0KSB7XG4gICAgICAgIGluaXRBdWRpbygpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBbmltYXRpb24gbG9vcFxuICAgIGNvbnN0IHRpbWVTdGVwID0gMSAvIDYwO1xuICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSBwaHlzaWNzXG4gICAgICB3b3JsZC5zdGVwKHRpbWVTdGVwKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHZpc3VhbCBvYmplY3RzIHRvIG1hdGNoIHBoeXNpY3NcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmFsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYmFsbHNbaV0ubWVzaC5wb3NpdGlvbi5jb3B5KGJhbGxzW2ldLmJvZHkucG9zaXRpb24pO1xuICAgICAgICBiYWxsc1tpXS5tZXNoLnF1YXRlcm5pb24uY29weShiYWxsc1tpXS5ib2R5LnF1YXRlcm5pb24pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGJhbGxzIHRoYXQgaGl0IHRoZSBncm91bmQgb3IgZmFsbCB0b28gZmFyXG4gICAgICAgIGlmICgoYmFsbHNbaV0uYm9keS51c2VyRGF0YSAmJiBiYWxsc1tpXS5ib2R5LnVzZXJEYXRhLnNob3VsZFJlbW92ZSkgfHwgXG4gICAgICAgICAgICBiYWxsc1tpXS5ib2R5LnBvc2l0aW9uLnkgPCAtMTApIHtcbiAgICAgICAgICBzY2VuZS5yZW1vdmUoYmFsbHNbaV0ubWVzaCk7XG4gICAgICAgICAgd29ybGQucmVtb3ZlQm9keShiYWxsc1tpXS5ib2R5KTtcbiAgICAgICAgICBiYWxscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgaS0tO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0dXAgdGhlIHNjZW5lXG4gICAgaW5pdFNjZW5lKCk7XG4gICAgaW5pdFBoeXNpY3MoKTtcbiAgICBcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25XaW5kb3dSZXNpemUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTtcbiAgICBcbiAgICAvLyBTZXR1cCBzb3VuZCB0b2dnbGVcbiAgICBjb25zdCBzb3VuZFRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VuZC10b2dnbGUnKTtcbiAgICBpZiAoc291bmRUb2dnbGUpIHtcbiAgICAgIHNvdW5kVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlU291bmQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdGFydCBhbmltYXRpb24gbG9vcFxuICAgIGFuaW1hdGUoKTtcbiAgICBcbiAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIFJlbW92ZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uV2luZG93UmVzaXplKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTtcbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIHNvdW5kIHRvZ2dsZSBsaXN0ZW5lclxuICAgICAgY29uc3Qgc291bmRUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291bmQtdG9nZ2xlJyk7XG4gICAgICBpZiAoc291bmRUb2dnbGUpIHtcbiAgICAgICAgc291bmRUb2dnbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTb3VuZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN0b3AgYW5pbWF0aW9uIGZyYW1lXG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICAgIFxuICAgICAgLy8gRGlzcG9zZSByZW5kZXJlclxuICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGNhbnZhcyBmcm9tIERPTVxuICAgICAgaWYgKG1vdW50UmVmLmN1cnJlbnQgJiYgcmVuZGVyZXIgJiYgcmVuZGVyZXIuZG9tRWxlbWVudCkge1xuICAgICAgICBtb3VudFJlZi5jdXJyZW50LnJlbW92ZUNoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSBwbGF0Zm9ybSBib3VuY2luZXNzXG4gIGNvbnN0IGhhbmRsZUJvdW5jaW5lc3NDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBuZXdSZXN0aXR1dGlvbiA9IHBhcnNlRmxvYXQoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgYm90aCB0aGUgY29udGFjdCBtYXRlcmlhbCBhbmQgcGxhdGZvcm0gbWF0ZXJpYWwgcmVzdGl0dXRpb25cbiAgICBpZiAoY29udGFjdE1hdGVyaWFsUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnRhY3RNYXRlcmlhbFJlZi5jdXJyZW50LnJlc3RpdHV0aW9uID0gbmV3UmVzdGl0dXRpb247XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgcGxhdGZvcm0gbWF0ZXJpYWwncyByZXN0aXR1dGlvbiBmb3IgbmV3IGNvbnRhY3RzXG4gICAgaWYgKHBsYXRmb3JtTWF0ZXJpYWxSZWYuY3VycmVudCkge1xuICAgICAgcGxhdGZvcm1NYXRlcmlhbFJlZi5jdXJyZW50LnJlc3RpdHV0aW9uID0gbmV3UmVzdGl0dXRpb247XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSBkaXNwbGF5IHZhbHVlXG4gICAgY29uc3QgZGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib3VuY2luZXNzLXZhbHVlJyk7XG4gICAgaWYgKGRpc3BsYXkpIHtcbiAgICAgIGRpc3BsYXkudGV4dENvbnRlbnQgPSBuZXdSZXN0aXR1dGlvbi50b0ZpeGVkKDIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBQbGF5IGEgc3VidGxlIGZlZWRiYWNrIHRvbmUgd2hlbiB2YWx1ZSBjaGFuZ2VzXG4gICAgaWYgKHdpbmRvdy5wbGF5Qm91bmNlU291bmQpIHtcbiAgICAgIHdpbmRvdy5wbGF5Qm91bmNlU291bmQobmV3UmVzdGl0dXRpb24gKiAwLjMpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2NlbmUtY29udGFpbmVyXCIgcmVmPXttb3VudFJlZn0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMTAwdmgnIH19PlxuICAgICAgPGRpdiBpZD1cImluc3RydWN0aW9uc1wiPlxuICAgICAgICA8aDI+TXVzaWNhbCBCb3VuY2UgQ29udHJvbHM8L2gyPlxuICAgICAgICA8cD5DbGljayB0byBkcm9wIGJhbGxzPC9wPlxuICAgICAgICA8cD5TaGlmdCArIENsaWNrICsgRHJhZyB0byBjcmVhdGUgd2FsbHM8L3A+XG4gICAgICAgIDxwPldhbGwgbGVuZ3RoIGRldGVybWluZXMgcGl0Y2ggKDIgb2N0YXZlcyBvZiBDIG1ham9yKTwvcD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzbGlkZXItY29udGFpbmVyXCI+XG4gICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJib3VuY2luZXNzLXNsaWRlclwiPlBsYXRmb3JtIEJvdW5jaW5lc3M6PC9sYWJlbD5cbiAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICB0eXBlPVwicmFuZ2VcIiBcbiAgICAgICAgICAgIGlkPVwiYm91bmNpbmVzcy1zbGlkZXJcIiBcbiAgICAgICAgICAgIG5hbWU9XCJib3VuY2luZXNzXCIgXG4gICAgICAgICAgICBtaW49XCIwLjFcIiBcbiAgICAgICAgICAgIG1heD1cIjEwLjBcIiBcbiAgICAgICAgICAgIHN0ZXA9XCIwLjJcIiBcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZT1cIjAuNVwiIFxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUJvdW5jaW5lc3NDaGFuZ2V9IFxuICAgICAgICAgICAgYXJpYS1sYWJlbD1cIkFkanVzdCBQbGF0Zm9ybSBCb3VuY2luZXNzXCJcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzcGFuIGlkPVwiYm91bmNpbmVzcy12YWx1ZVwiPjAuNTA8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8YnV0dG9uIGlkPVwic291bmQtdG9nZ2xlXCIgYXJpYS1sYWJlbD1cIlRvZ2dsZSBzb3VuZFwiPvCflIo8L2J1dHRvbj5cbiAgICAgIDxOb3RlRGlzcGxheSBpc0RyYXdpbmc9e2lzRHJhd2luZ30gd2FsbExlbmd0aD17d2FsbExlbmd0aH0gLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuLy8gQWRkIHNvbWUgYmFzaWMgc3R5bGluZyBmb3IgdGhlIHNsaWRlclxuLy8gSWRlYWxseSwgdGhpcyB3b3VsZCBnbyBpbiBhIHNlcGFyYXRlIENTUyBmaWxlXG5jb25zdCBzdHlsZXMgPSBgXG4uc2xpZGVyLWNvbnRhaW5lciB7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGdhcDogMTBweDtcbn1cblxuI2JvdW5jaW5lc3Mtc2xpZGVyIHtcbiAgd2lkdGg6IDE1MHB4O1xufVxuXG4jYm91bmNpbmVzcy12YWx1ZSB7XG4gIG1pbi13aWR0aDogMzBweDsgLyogUHJldmVudCBsYXlvdXQgc2hpZnQgKi9cbiAgdGV4dC1hbGlnbjogcmlnaHQ7XG59XG5cbi8qIFlvdSBtaWdodCBuZWVkIHN0eWxlcyBmb3IgI2luc3RydWN0aW9ucywgI3NvdW5kLXRvZ2dsZSBldGMuICovXG4jaW5zdHJ1Y3Rpb25zIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDEwcHg7XG4gIGxlZnQ6IDEwcHg7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC43KTtcbiAgY29sb3I6IHdoaXRlO1xuICBwYWRkaW5nOiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHotaW5kZXg6IDEwO1xufVxuXG4jc291bmQtdG9nZ2xlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDEwcHg7XG4gIHJpZ2h0OiAxMHB4O1xuICBmb250LXNpemU6IDEuNWVtO1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBib3JkZXI6IG5vbmU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgei1pbmRleDogMTA7XG59XG5gO1xuXG4vLyBJbmplY3Qgc3R5bGVzIGludG8gdGhlIGhlYWQgLSBzaW1wbGUgd2F5IGZvciB0aGlzIGV4YW1wbGVcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBzdHlsZVNoZWV0LnR5cGUgPSBcInRleHQvY3NzXCI7XG4gIHN0eWxlU2hlZXQuaW5uZXJUZXh0ID0gc3R5bGVzO1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpO1xufSAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJUSFJFRSIsIkNBTk5PTiIsIm1hcExlbmd0aFRvTm90ZSIsImdldE5vdGVDb2xvciIsInBsYXlOb3RlRm9yTGVuZ3RoIiwiTm90ZURpc3BsYXkiLCJCb3VuY2VTY2VuZSIsIm1vdW50UmVmIiwiY29udGFjdE1hdGVyaWFsUmVmIiwicGxhdGZvcm1NYXRlcmlhbFJlZiIsImlzRHJhd2luZyIsInNldElzRHJhd2luZyIsIndhbGxMZW5ndGgiLCJzZXRXYWxsTGVuZ3RoIiwic2NlbmUiLCJjYW1lcmEiLCJyZW5kZXJlciIsIndvcmxkIiwiYmFsbHMiLCJ3YWxscyIsIndhbGxCb2RpZXMiLCJpc0RyYXdpbmdJbnRlcm5hbCIsIndhbGxTdGFydCIsIlZlY3RvcjMiLCJ3YWxsRW5kIiwiY3VycmVudFdhbGxNZXNoIiwiYXVkaW9Db250ZXh0Iiwic291bmRFbmFibGVkIiwiYmFsbE1hdGVyaWFsIiwiTWF0ZXJpYWwiLCJmcmljdGlvbiIsInJlc3RpdHV0aW9uIiwicGxhdGZvcm1NYXRlcmlhbCIsImN1cnJlbnQiLCJiYWxsUGxhdGZvcm1Db250YWN0TWF0ZXJpYWwiLCJpbml0QXVkaW8iLCJ3aW5kb3ciLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJwbGF5Qm91bmNlU291bmQiLCJpbnRlbnNpdHkiLCJvc2NpbGxhdG9yIiwiY3JlYXRlT3NjaWxsYXRvciIsImdhaW5Ob2RlIiwiY3JlYXRlR2FpbiIsInR5cGUiLCJmcmVxdWVuY3kiLCJzZXRWYWx1ZUF0VGltZSIsImN1cnJlbnRUaW1lIiwiZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSIsImdhaW4iLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJzdGFydCIsInN0b3AiLCJpbml0U2NlbmUiLCJTY2VuZSIsImJhY2tncm91bmQiLCJDb2xvciIsIlBlcnNwZWN0aXZlQ2FtZXJhIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwicG9zaXRpb24iLCJ6IiwiV2ViR0xSZW5kZXJlciIsImFudGlhbGlhcyIsInNldFNpemUiLCJzaGFkb3dNYXAiLCJlbmFibGVkIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiYW1iaWVudExpZ2h0IiwiQW1iaWVudExpZ2h0IiwiYWRkIiwiZGlyZWN0aW9uYWxMaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJzZXQiLCJjYXN0U2hhZG93Iiwic2hhZG93IiwibWFwU2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiaW5pdFBoeXNpY3MiLCJXb3JsZCIsImdyYXZpdHkiLCJWZWMzIiwiQ29udGFjdE1hdGVyaWFsIiwiYWRkQ29udGFjdE1hdGVyaWFsIiwiZ3JvdW5kQm9keSIsIkJvZHkiLCJTVEFUSUMiLCJzaGFwZSIsIlBsYW5lIiwibWF0ZXJpYWwiLCJxdWF0ZXJuaW9uIiwic2V0RnJvbUF4aXNBbmdsZSIsIk1hdGgiLCJQSSIsInkiLCJ1c2VyRGF0YSIsImlzR3JvdW5kIiwiYWRkQm9keSIsImdyb3VuZEdlb21ldHJ5IiwiUGxhbmVHZW9tZXRyeSIsImdyb3VuZE1hdGVyaWFsIiwiTWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJjb2xvciIsInJvdWdobmVzcyIsIm1ldGFsbmVzcyIsImdyb3VuZCIsIk1lc2giLCJyb3RhdGlvbiIsIngiLCJyZWNlaXZlU2hhZG93IiwiY3JlYXRlQmFsbCIsInJhZGl1cyIsImJhbGxCb2R5IiwibWFzcyIsIlNwaGVyZSIsImxpbmVhckRhbXBpbmciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJyZWxhdGl2ZVZlbG9jaXR5IiwiY29udGFjdCIsImdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwiLCJvdGhlckJvZHkiLCJib2R5IiwidGFyZ2V0Iiwibm90ZSIsImFicyIsIm1pbiIsImxlbmd0aCIsInNob3VsZFJlbW92ZSIsImJhbGxHZW9tZXRyeSIsIlNwaGVyZUdlb21ldHJ5IiwidmlzdWFsQmFsbE1hdGVyaWFsIiwicmFuZG9tIiwiYmFsbE1lc2giLCJtZXNoIiwiY3JlYXRlV2FsbCIsImVuZCIsImRpcmVjdGlvbiIsInN1YlZlY3RvcnMiLCJjZW50ZXIiLCJhZGRWZWN0b3JzIiwibXVsdGlwbHlTY2FsYXIiLCJ3YWxsRGlyZWN0aW9uIiwiY2xvbmUiLCJub3JtYWxpemUiLCJhbmdsZSIsImF0YW4yIiwibm90ZUNvbG9yIiwic3BoZXJlR2VvbWV0cnkiLCJzdGFydFNwaGVyZSIsImVuZFNwaGVyZSIsImNvcHkiLCJjb25zb2xlIiwibG9nIiwid2FsbFNoYXBlIiwiQm94Iiwid2FsbEJvZHkiLCJwdXNoIiwid2FsbEdlb21ldHJ5IiwiQm94R2VvbWV0cnkiLCJ3YWxsTWF0ZXJpYWwiLCJ3YWxsTWVzaCIsInVwZGF0ZVRlbXBXYWxsIiwicmVtb3ZlIiwidHJhbnNwYXJlbnQiLCJvcGFjaXR5IiwicmF5Y2FzdGVyIiwiUmF5Y2FzdGVyIiwibW91c2UiLCJWZWN0b3IyIiwiZHJhd2luZ1BsYW5lIiwib25Nb3VzZURvd24iLCJjbGllbnRYIiwiY2xpZW50WSIsInNldEZyb21DYW1lcmEiLCJzaGlmdEtleSIsIm1hcmtlckdlb21ldHJ5IiwibWFya2VyTWF0ZXJpYWwiLCJNZXNoQmFzaWNNYXRlcmlhbCIsIm1hcmtlciIsImludGVyc2VjdGlvbiIsInJheSIsImludGVyc2VjdFBsYW5lIiwic2V0VGltZW91dCIsImJhbGwiLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsImRpc3RhbmNlVG8iLCJvbldpbmRvd1Jlc2l6ZSIsImFzcGVjdCIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJvblRvdWNoU3RhcnQiLCJwcmV2ZW50RGVmYXVsdCIsInRvdWNoIiwidG91Y2hlcyIsInRvZ2dsZVNvdW5kIiwic291bmRUb2dnbGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGV4dENvbnRlbnQiLCJzZXRBdHRyaWJ1dGUiLCJ0aW1lU3RlcCIsImFuaW1hdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdGVwIiwiaSIsInJlbW92ZUJvZHkiLCJzcGxpY2UiLCJyZW5kZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJkaXNwb3NlIiwicmVtb3ZlQ2hpbGQiLCJoYW5kbGVCb3VuY2luZXNzQ2hhbmdlIiwibmV3UmVzdGl0dXRpb24iLCJwYXJzZUZsb2F0IiwidmFsdWUiLCJkaXNwbGF5IiwidG9GaXhlZCIsImRpdiIsImNsYXNzTmFtZSIsInJlZiIsInN0eWxlIiwiaWQiLCJoMiIsInAiLCJsYWJlbCIsImh0bWxGb3IiLCJpbnB1dCIsIm5hbWUiLCJtYXgiLCJkZWZhdWx0VmFsdWUiLCJvbkNoYW5nZSIsImFyaWEtbGFiZWwiLCJzcGFuIiwiYnV0dG9uIiwic3R5bGVzIiwic3R5bGVTaGVldCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lclRleHQiLCJoZWFkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/BounceScene.js\n");

/***/ }),

/***/ "./components/NoteDisplay.js":
/*!***********************************!*\
  !*** ./components/NoteDisplay.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ NoteDisplay)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_midiSequencer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/midiSequencer */ \"./utils/midiSequencer.js\");\n\n\n\n/**\n * Component to display the current note when drawing walls\n */ function NoteDisplay({ isDrawing, wallLength }) {\n    const [note, setNote] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    // Update note when wall length changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isDrawing && wallLength > 0) {\n            setNote((0,_utils_midiSequencer__WEBPACK_IMPORTED_MODULE_2__.mapLengthToNote)(wallLength));\n        } else {\n            setNote(\"\");\n        }\n    }, [\n        isDrawing,\n        wallLength\n    ]);\n    // Don't render anything if not drawing\n    if (!isDrawing || !note) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"note-display\",\n        \"aria-live\": \"polite\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"note-display-content\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: \"Current Note: \"\n                }, void 0, false, {\n                    fileName: \"/Users/arcades/Code/Bounce-webvr/components/NoteDisplay.js\",\n                    lineNumber: 27,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                    children: note\n                }, void 0, false, {\n                    fileName: \"/Users/arcades/Code/Bounce-webvr/components/NoteDisplay.js\",\n                    lineNumber: 28,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/arcades/Code/Bounce-webvr/components/NoteDisplay.js\",\n            lineNumber: 26,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/arcades/Code/Bounce-webvr/components/NoteDisplay.js\",\n        lineNumber: 25,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL05vdGVEaXNwbGF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEM7QUFDYTtBQUV6RDs7Q0FFQyxHQUNjLFNBQVNHLFlBQVksRUFBRUMsU0FBUyxFQUFFQyxVQUFVLEVBQUU7SUFDM0QsTUFBTSxDQUFDQyxNQUFNQyxRQUFRLEdBQUdOLCtDQUFRQSxDQUFDO0lBRWpDLHVDQUF1QztJQUN2Q0QsZ0RBQVNBLENBQUM7UUFDUixJQUFJSSxhQUFhQyxhQUFhLEdBQUc7WUFDL0JFLFFBQVFMLHFFQUFlQSxDQUFDRztRQUMxQixPQUFPO1lBQ0xFLFFBQVE7UUFDVjtJQUNGLEdBQUc7UUFBQ0g7UUFBV0M7S0FBVztJQUUxQix1Q0FBdUM7SUFDdkMsSUFBSSxDQUFDRCxhQUFhLENBQUNFLE1BQU07UUFDdkIsT0FBTztJQUNUO0lBRUEscUJBQ0UsOERBQUNFO1FBQUlDLFdBQVU7UUFBZUMsYUFBVTtrQkFDdEMsNEVBQUNGO1lBQUlDLFdBQVU7OzhCQUNiLDhEQUFDRTs4QkFBSzs7Ozs7OzhCQUNOLDhEQUFDQzs4QkFBUU47Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSWpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm91bmNlLXdlYnZyLy4vY29tcG9uZW50cy9Ob3RlRGlzcGxheS5qcz85MjIwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtYXBMZW5ndGhUb05vdGUgfSBmcm9tICcuLi91dGlscy9taWRpU2VxdWVuY2VyJztcblxuLyoqXG4gKiBDb21wb25lbnQgdG8gZGlzcGxheSB0aGUgY3VycmVudCBub3RlIHdoZW4gZHJhd2luZyB3YWxsc1xuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBOb3RlRGlzcGxheSh7IGlzRHJhd2luZywgd2FsbExlbmd0aCB9KSB7XG4gIGNvbnN0IFtub3RlLCBzZXROb3RlXSA9IHVzZVN0YXRlKCcnKTtcbiAgXG4gIC8vIFVwZGF0ZSBub3RlIHdoZW4gd2FsbCBsZW5ndGggY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0RyYXdpbmcgJiYgd2FsbExlbmd0aCA+IDApIHtcbiAgICAgIHNldE5vdGUobWFwTGVuZ3RoVG9Ob3RlKHdhbGxMZW5ndGgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Tm90ZSgnJyk7XG4gICAgfVxuICB9LCBbaXNEcmF3aW5nLCB3YWxsTGVuZ3RoXSk7XG4gIFxuICAvLyBEb24ndCByZW5kZXIgYW55dGhpbmcgaWYgbm90IGRyYXdpbmdcbiAgaWYgKCFpc0RyYXdpbmcgfHwgIW5vdGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm5vdGUtZGlzcGxheVwiIGFyaWEtbGl2ZT1cInBvbGl0ZVwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJub3RlLWRpc3BsYXktY29udGVudFwiPlxuICAgICAgICA8c3Bhbj5DdXJyZW50IE5vdGU6IDwvc3Bhbj5cbiAgICAgICAgPHN0cm9uZz57bm90ZX08L3N0cm9uZz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufSAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJtYXBMZW5ndGhUb05vdGUiLCJOb3RlRGlzcGxheSIsImlzRHJhd2luZyIsIndhbGxMZW5ndGgiLCJub3RlIiwic2V0Tm90ZSIsImRpdiIsImNsYXNzTmFtZSIsImFyaWEtbGl2ZSIsInNwYW4iLCJzdHJvbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/NoteDisplay.js\n");

/***/ }),

/***/ "./utils/midiSequencer.js":
/*!********************************!*\
  !*** ./utils/midiSequencer.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuantizationSettings: () => (/* binding */ QuantizationSettings),\n/* harmony export */   getNoteColor: () => (/* binding */ getNoteColor),\n/* harmony export */   mapLengthToFrequency: () => (/* binding */ mapLengthToFrequency),\n/* harmony export */   mapLengthToNote: () => (/* binding */ mapLengthToNote),\n/* harmony export */   playNoteForLength: () => (/* binding */ playNoteForLength),\n/* harmony export */   quantizeLength: () => (/* binding */ quantizeLength)\n/* harmony export */ });\n/**\n * MIDI Sequencer Utility\n * Handles converting bar lengths to MIDI notes and playing them\n */ // C major scale notes for two octaves (C4 to C6)\nconst MAJOR_SCALE_FREQUENCIES = {\n    // First octave (C4 - B4)\n    \"C4\": 261.63,\n    \"D4\": 293.66,\n    \"E4\": 329.63,\n    \"F4\": 349.23,\n    \"G4\": 392.00,\n    \"A4\": 440.00,\n    \"B4\": 493.88,\n    // Second octave (C5 - B5)\n    \"C5\": 523.25,\n    \"D5\": 587.33,\n    \"E5\": 659.26,\n    \"F5\": 698.46,\n    \"G5\": 783.99,\n    \"A5\": 880.00,\n    \"B5\": 987.77,\n    // C6 for completion\n    \"C6\": 1046.50\n};\n// Array for easier access - C major scale (C, D, E, F, G, A, B)\nconst MAJOR_SCALE_NOTES = [\n    \"C4\",\n    \"D4\",\n    \"E4\",\n    \"F4\",\n    \"G4\",\n    \"A4\",\n    \"B4\",\n    \"C5\",\n    \"D5\",\n    \"E5\",\n    \"F5\",\n    \"G5\",\n    \"A5\",\n    \"B5\",\n    \"C6\"\n];\n/**\n * Maps a wall length to a note in the C major scale\n * @param {number} length - The length of the wall\n * @param {number} minLength - Minimum wall length that maps to the lowest note\n * @param {number} maxLength - Maximum wall length that maps to the highest note\n * @returns {string} The note name (e.g., 'C4', 'D4', etc.)\n */ function mapLengthToNote(length, minLength = 0.2, maxLength = 3.0) {\n    // Clamp length to min/max range\n    const clampedLength = Math.max(minLength, Math.min(length, maxLength));\n    // Calculate normalized position in the range [0, 1]\n    const normalizedPos = (clampedLength - minLength) / (maxLength - minLength);\n    // Map to an index in the scale\n    const noteIndex = Math.floor(normalizedPos * MAJOR_SCALE_NOTES.length);\n    // Return the corresponding note\n    return MAJOR_SCALE_NOTES[Math.min(noteIndex, MAJOR_SCALE_NOTES.length - 1)];\n}\n/**\n * Maps a wall length to a frequency\n * @param {number} length - The length of the wall\n * @param {number} minLength - Minimum wall length that maps to the lowest note\n * @param {number} maxLength - Maximum wall length that maps to the highest note\n * @returns {number} The frequency in Hz\n */ function mapLengthToFrequency(length, minLength = 0.2, maxLength = 3.0) {\n    const note = mapLengthToNote(length, minLength, maxLength);\n    return MAJOR_SCALE_FREQUENCIES[note];\n}\n/**\n * Plays a note based on the wall length using the Web Audio API\n * @param {AudioContext} audioContext - The audio context to use\n * @param {number} length - The length of the wall\n * @param {number} duration - The duration of the note in seconds\n * @param {number} volume - The volume of the note (0-1)\n * @param {string} waveform - The oscillator waveform type ('sine', 'square', 'sawtooth', 'triangle')\n * @returns {Object} The oscillator and gain nodes\n */ function playNoteForLength(audioContext, length, duration = 0.5, volume = 0.5, waveform = \"sine\") {\n    if (!audioContext) return null;\n    const frequency = mapLengthToFrequency(length);\n    // Create oscillator and gain nodes\n    const oscillator = audioContext.createOscillator();\n    const gainNode = audioContext.createGain();\n    // Configure oscillator\n    oscillator.type = waveform;\n    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);\n    // Configure gain (volume with fade out)\n    gainNode.gain.setValueAtTime(volume, audioContext.currentTime);\n    gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration);\n    // Connect nodes\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContext.destination);\n    // Start and stop the oscillator\n    oscillator.start();\n    oscillator.stop(audioContext.currentTime + duration);\n    return {\n        oscillator,\n        gainNode,\n        frequency,\n        note: mapLengthToNote(length)\n    };\n}\n/**\n * Gets the color for a specific note\n * @param {string} note - The note name\n * @returns {number} The color as a hexadecimal number\n */ function getNoteColor(note) {\n    // Simple color map based on note position in the scale\n    const noteIndex = MAJOR_SCALE_NOTES.indexOf(note);\n    // Create a hue value based on the note position (rainbow effect)\n    const hue = noteIndex / MAJOR_SCALE_NOTES.length * 360;\n    // Convert HSL to RGB (simple conversion for demonstration)\n    const h = hue / 60;\n    const s = 0.8; // saturation\n    const l = 0.5; // lightness\n    const c = (1 - Math.abs(2 * l - 1)) * s;\n    const x = c * (1 - Math.abs(h % 2 - 1));\n    const m = l - c / 2;\n    let r, g, b;\n    if (h >= 0 && h < 1) {\n        r = c;\n        g = x;\n        b = 0;\n    } else if (h >= 1 && h < 2) {\n        r = x;\n        g = c;\n        b = 0;\n    } else if (h >= 2 && h < 3) {\n        r = 0;\n        g = c;\n        b = x;\n    } else if (h >= 3 && h < 4) {\n        r = 0;\n        g = x;\n        b = c;\n    } else if (h >= 4 && h < 5) {\n        r = x;\n        g = 0;\n        b = c;\n    } else {\n        r = c;\n        g = 0;\n        b = x;\n    }\n    r = Math.round((r + m) * 255);\n    g = Math.round((g + m) * 255);\n    b = Math.round((b + m) * 255);\n    // Convert RGB to hex\n    return r << 16 | g << 8 | b;\n}\n/**\n * Structure for future quantization settings\n * This allows for modular implementation of quantization later\n */ const QuantizationSettings = {\n    NONE: {\n        id: \"none\",\n        name: \"None\",\n        value: 0\n    },\n    EIGHTH: {\n        id: \"eighth\",\n        name: \"Eighth Notes\",\n        value: 8\n    },\n    QUARTER: {\n        id: \"quarter\",\n        name: \"Quarter Notes\",\n        value: 4\n    },\n    HALF: {\n        id: \"half\",\n        name: \"Half Notes\",\n        value: 2\n    },\n    WHOLE: {\n        id: \"whole\",\n        name: \"Whole Notes\",\n        value: 1\n    }\n};\n/**\n * Placeholder for future quantization function\n * @param {number} length - The raw length value\n * @param {Object} quantSettings - The quantization settings\n * @returns {number} The quantized length\n */ function quantizeLength(length, quantSettings = QuantizationSettings.NONE) {\n    if (quantSettings.id === \"none\") {\n        return length; // No quantization\n    }\n    // This is where custom quantization logic will go in the future\n    // For now, we're just returning the original length\n    return length;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQVFDLE9BQU87SUFBRTtJQUMzQ0MsUUFBUTtRQUFFSCxJQUFJO1FBQVVDLE1BQU07UUFBZ0JDLE9BQU87SUFBRTtJQUN2REUsU0FBUztRQUFFSixJQUFJO1FBQVdDLE1BQU07UUFBaUJDLE9BQU87SUFBRTtJQUMxREcsTUFBTTtRQUFFTCxJQUFJO1FBQVFDLE1BQU07UUFBY0MsT0FBTztJQUFFO0lBQ2pESSxPQUFPO1FBQUVOLElBQUk7UUFBU0MsTUFBTTtRQUFlQyxPQUFPO0lBQUU7QUFDdEQsRUFBRTtBQUVGOzs7OztDQUtDLEdBQ00sU0FBU0ssZUFBZXRELE1BQU0sRUFBRXVELGdCQUFnQlYscUJBQXFCQyxJQUFJO0lBQzlFLElBQUlTLGNBQWNSLEVBQUUsS0FBSyxRQUFRO1FBQy9CLE9BQU8vQyxRQUFRLGtCQUFrQjtJQUNuQztJQUVBLGdFQUFnRTtJQUNoRSxvREFBb0Q7SUFDcEQsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2JvdW5jZS13ZWJ2ci8uL3V0aWxzL21pZGlTZXF1ZW5jZXIuanM/MzA2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1JREkgU2VxdWVuY2VyIFV0aWxpdHlcbiAqIEhhbmRsZXMgY29udmVydGluZyBiYXIgbGVuZ3RocyB0byBNSURJIG5vdGVzIGFuZCBwbGF5aW5nIHRoZW1cbiAqL1xuXG4vLyBDIG1ham9yIHNjYWxlIG5vdGVzIGZvciB0d28gb2N0YXZlcyAoQzQgdG8gQzYpXG5jb25zdCBNQUpPUl9TQ0FMRV9GUkVRVUVOQ0lFUyA9IHtcbiAgLy8gRmlyc3Qgb2N0YXZlIChDNCAtIEI0KVxuICAnQzQnOiAyNjEuNjMsXG4gICdENCc6IDI5My42NixcbiAgJ0U0JzogMzI5LjYzLFxuICAnRjQnOiAzNDkuMjMsXG4gICdHNCc6IDM5Mi4wMCxcbiAgJ0E0JzogNDQwLjAwLFxuICAnQjQnOiA0OTMuODgsXG4gIFxuICAvLyBTZWNvbmQgb2N0YXZlIChDNSAtIEI1KVxuICAnQzUnOiA1MjMuMjUsXG4gICdENSc6IDU4Ny4zMyxcbiAgJ0U1JzogNjU5LjI2LFxuICAnRjUnOiA2OTguNDYsXG4gICdHNSc6IDc4My45OSxcbiAgJ0E1JzogODgwLjAwLFxuICAnQjUnOiA5ODcuNzcsXG4gIFxuICAvLyBDNiBmb3IgY29tcGxldGlvblxuICAnQzYnOiAxMDQ2LjUwXG59O1xuXG4vLyBBcnJheSBmb3IgZWFzaWVyIGFjY2VzcyAtIEMgbWFqb3Igc2NhbGUgKEMsIEQsIEUsIEYsIEcsIEEsIEIpXG5jb25zdCBNQUpPUl9TQ0FMRV9OT1RFUyA9IFtcbiAgJ0M0JywgJ0Q0JywgJ0U0JywgJ0Y0JywgJ0c0JywgJ0E0JywgJ0I0JyxcbiAgJ0M1JywgJ0Q1JywgJ0U1JywgJ0Y1JywgJ0c1JywgJ0E1JywgJ0I1JywgJ0M2J1xuXTtcblxuLyoqXG4gKiBNYXBzIGEgd2FsbCBsZW5ndGggdG8gYSBub3RlIGluIHRoZSBDIG1ham9yIHNjYWxlXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gVGhlIGxlbmd0aCBvZiB0aGUgd2FsbFxuICogQHBhcmFtIHtudW1iZXJ9IG1pbkxlbmd0aCAtIE1pbmltdW0gd2FsbCBsZW5ndGggdGhhdCBtYXBzIHRvIHRoZSBsb3dlc3Qgbm90ZVxuICogQHBhcmFtIHtudW1iZXJ9IG1heExlbmd0aCAtIE1heGltdW0gd2FsbCBsZW5ndGggdGhhdCBtYXBzIHRvIHRoZSBoaWdoZXN0IG5vdGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBub3RlIG5hbWUgKGUuZy4sICdDNCcsICdENCcsIGV0Yy4pXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBMZW5ndGhUb05vdGUobGVuZ3RoLCBtaW5MZW5ndGggPSAwLjIsIG1heExlbmd0aCA9IDMuMCkge1xuICAvLyBDbGFtcCBsZW5ndGggdG8gbWluL21heCByYW5nZVxuICBjb25zdCBjbGFtcGVkTGVuZ3RoID0gTWF0aC5tYXgobWluTGVuZ3RoLCBNYXRoLm1pbihsZW5ndGgsIG1heExlbmd0aCkpO1xuICBcbiAgLy8gQ2FsY3VsYXRlIG5vcm1hbGl6ZWQgcG9zaXRpb24gaW4gdGhlIHJhbmdlIFswLCAxXVxuICBjb25zdCBub3JtYWxpemVkUG9zID0gKGNsYW1wZWRMZW5ndGggLSBtaW5MZW5ndGgpIC8gKG1heExlbmd0aCAtIG1pbkxlbmd0aCk7XG4gIFxuICAvLyBNYXAgdG8gYW4gaW5kZXggaW4gdGhlIHNjYWxlXG4gIGNvbnN0IG5vdGVJbmRleCA9IE1hdGguZmxvb3Iobm9ybWFsaXplZFBvcyAqIE1BSk9SX1NDQUxFX05PVEVTLmxlbmd0aCk7XG4gIFxuICAvLyBSZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgbm90ZVxuICByZXR1cm4gTUFKT1JfU0NBTEVfTk9URVNbTWF0aC5taW4obm90ZUluZGV4LCBNQUpPUl9TQ0FMRV9OT1RFUy5sZW5ndGggLSAxKV07XG59XG5cbi8qKlxuICogTWFwcyBhIHdhbGwgbGVuZ3RoIHRvIGEgZnJlcXVlbmN5XG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoIC0gVGhlIGxlbmd0aCBvZiB0aGUgd2FsbFxuICogQHBhcmFtIHtudW1iZXJ9IG1pbkxlbmd0aCAtIE1pbmltdW0gd2FsbCBsZW5ndGggdGhhdCBtYXBzIHRvIHRoZSBsb3dlc3Qgbm90ZVxuICogQHBhcmFtIHtudW1iZXJ9IG1heExlbmd0aCAtIE1heGltdW0gd2FsbCBsZW5ndGggdGhhdCBtYXBzIHRvIHRoZSBoaWdoZXN0IG5vdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBmcmVxdWVuY3kgaW4gSHpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcExlbmd0aFRvRnJlcXVlbmN5KGxlbmd0aCwgbWluTGVuZ3RoID0gMC4yLCBtYXhMZW5ndGggPSAzLjApIHtcbiAgY29uc3Qgbm90ZSA9IG1hcExlbmd0aFRvTm90ZShsZW5ndGgsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoKTtcbiAgcmV0dXJuIE1BSk9SX1NDQUxFX0ZSRVFVRU5DSUVTW25vdGVdO1xufVxuXG4vKipcbiAqIFBsYXlzIGEgbm90ZSBiYXNlZCBvbiB0aGUgd2FsbCBsZW5ndGggdXNpbmcgdGhlIFdlYiBBdWRpbyBBUElcbiAqIEBwYXJhbSB7QXVkaW9Db250ZXh0fSBhdWRpb0NvbnRleHQgLSBUaGUgYXVkaW8gY29udGV4dCB0byB1c2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggLSBUaGUgbGVuZ3RoIG9mIHRoZSB3YWxsXG4gKiBAcGFyYW0ge251bWJlcn0gZHVyYXRpb24gLSBUaGUgZHVyYXRpb24gb2YgdGhlIG5vdGUgaW4gc2Vjb25kc1xuICogQHBhcmFtIHtudW1iZXJ9IHZvbHVtZSAtIFRoZSB2b2x1bWUgb2YgdGhlIG5vdGUgKDAtMSlcbiAqIEBwYXJhbSB7c3RyaW5nfSB3YXZlZm9ybSAtIFRoZSBvc2NpbGxhdG9yIHdhdmVmb3JtIHR5cGUgKCdzaW5lJywgJ3NxdWFyZScsICdzYXd0b290aCcsICd0cmlhbmdsZScpXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgb3NjaWxsYXRvciBhbmQgZ2FpbiBub2Rlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcGxheU5vdGVGb3JMZW5ndGgoYXVkaW9Db250ZXh0LCBsZW5ndGgsIGR1cmF0aW9uID0gMC41LCB2b2x1bWUgPSAwLjUsIHdhdmVmb3JtID0gJ3NpbmUnKSB7XG4gIGlmICghYXVkaW9Db250ZXh0KSByZXR1cm4gbnVsbDtcbiAgXG4gIGNvbnN0IGZyZXF1ZW5jeSA9IG1hcExlbmd0aFRvRnJlcXVlbmN5KGxlbmd0aCk7XG4gIFxuICAvLyBDcmVhdGUgb3NjaWxsYXRvciBhbmQgZ2FpbiBub2Rlc1xuICBjb25zdCBvc2NpbGxhdG9yID0gYXVkaW9Db250ZXh0LmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgY29uc3QgZ2Fpbk5vZGUgPSBhdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpO1xuICBcbiAgLy8gQ29uZmlndXJlIG9zY2lsbGF0b3JcbiAgb3NjaWxsYXRvci50eXBlID0gd2F2ZWZvcm07XG4gIG9zY2lsbGF0b3IuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKGZyZXF1ZW5jeSwgYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcbiAgXG4gIC8vIENvbmZpZ3VyZSBnYWluICh2b2x1bWUgd2l0aCBmYWRlIG91dClcbiAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSk7XG4gIGdhaW5Ob2RlLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICsgZHVyYXRpb24pO1xuICBcbiAgLy8gQ29ubmVjdCBub2Rlc1xuICBvc2NpbGxhdG9yLmNvbm5lY3QoZ2Fpbk5vZGUpO1xuICBnYWluTm9kZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gIFxuICAvLyBTdGFydCBhbmQgc3RvcCB0aGUgb3NjaWxsYXRvclxuICBvc2NpbGxhdG9yLnN0YXJ0KCk7XG4gIG9zY2lsbGF0b3Iuc3RvcChhdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyBkdXJhdGlvbik7XG4gIFxuICByZXR1cm4geyBvc2NpbGxhdG9yLCBnYWluTm9kZSwgZnJlcXVlbmN5LCBub3RlOiBtYXBMZW5ndGhUb05vdGUobGVuZ3RoKSB9O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGNvbG9yIGZvciBhIHNwZWNpZmljIG5vdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBub3RlIC0gVGhlIG5vdGUgbmFtZVxuICogQHJldHVybnMge251bWJlcn0gVGhlIGNvbG9yIGFzIGEgaGV4YWRlY2ltYWwgbnVtYmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROb3RlQ29sb3Iobm90ZSkge1xuICAvLyBTaW1wbGUgY29sb3IgbWFwIGJhc2VkIG9uIG5vdGUgcG9zaXRpb24gaW4gdGhlIHNjYWxlXG4gIGNvbnN0IG5vdGVJbmRleCA9IE1BSk9SX1NDQUxFX05PVEVTLmluZGV4T2Yobm90ZSk7XG4gIFxuICAvLyBDcmVhdGUgYSBodWUgdmFsdWUgYmFzZWQgb24gdGhlIG5vdGUgcG9zaXRpb24gKHJhaW5ib3cgZWZmZWN0KVxuICBjb25zdCBodWUgPSAobm90ZUluZGV4IC8gTUFKT1JfU0NBTEVfTk9URVMubGVuZ3RoKSAqIDM2MDtcbiAgXG4gIC8vIENvbnZlcnQgSFNMIHRvIFJHQiAoc2ltcGxlIGNvbnZlcnNpb24gZm9yIGRlbW9uc3RyYXRpb24pXG4gIGNvbnN0IGggPSBodWUgLyA2MDtcbiAgY29uc3QgcyA9IDAuODsgLy8gc2F0dXJhdGlvblxuICBjb25zdCBsID0gMC41OyAvLyBsaWdodG5lc3NcbiAgXG4gIGNvbnN0IGMgPSAoMSAtIE1hdGguYWJzKDIgKiBsIC0gMSkpICogcztcbiAgY29uc3QgeCA9IGMgKiAoMSAtIE1hdGguYWJzKGggJSAyIC0gMSkpO1xuICBjb25zdCBtID0gbCAtIGMgLyAyO1xuICBcbiAgbGV0IHIsIGcsIGI7XG4gIFxuICBpZiAoaCA+PSAwICYmIGggPCAxKSB7IHIgPSBjOyBnID0geDsgYiA9IDA7IH1cbiAgZWxzZSBpZiAoaCA+PSAxICYmIGggPCAyKSB7IHIgPSB4OyBnID0gYzsgYiA9IDA7IH1cbiAgZWxzZSBpZiAoaCA+PSAyICYmIGggPCAzKSB7IHIgPSAwOyBnID0gYzsgYiA9IHg7IH1cbiAgZWxzZSBpZiAoaCA+PSAzICYmIGggPCA0KSB7IHIgPSAwOyBnID0geDsgYiA9IGM7IH1cbiAgZWxzZSBpZiAoaCA+PSA0ICYmIGggPCA1KSB7IHIgPSB4OyBnID0gMDsgYiA9IGM7IH1cbiAgZWxzZSB7IHIgPSBjOyBnID0gMDsgYiA9IHg7IH1cbiAgXG4gIHIgPSBNYXRoLnJvdW5kKChyICsgbSkgKiAyNTUpO1xuICBnID0gTWF0aC5yb3VuZCgoZyArIG0pICogMjU1KTtcbiAgYiA9IE1hdGgucm91bmQoKGIgKyBtKSAqIDI1NSk7XG4gIFxuICAvLyBDb252ZXJ0IFJHQiB0byBoZXhcbiAgcmV0dXJuIChyIDw8IDE2KSB8IChnIDw8IDgpIHwgYjtcbn1cblxuLyoqXG4gKiBTdHJ1Y3R1cmUgZm9yIGZ1dHVyZSBxdWFudGl6YXRpb24gc2V0dGluZ3NcbiAqIFRoaXMgYWxsb3dzIGZvciBtb2R1bGFyIGltcGxlbWVudGF0aW9uIG9mIHF1YW50aXphdGlvbiBsYXRlclxuICovXG5leHBvcnQgY29uc3QgUXVhbnRpemF0aW9uU2V0dGluZ3MgPSB7XG4gIE5PTkU6IHsgaWQ6ICdub25lJywgbmFtZTogJ05vbmUnLCB2YWx1ZTogMCB9LFxuICBFSUdIVEg6IHsgaWQ6ICdlaWdodGgnLCBuYW1lOiAnRWlnaHRoIE5vdGVzJywgdmFsdWU6IDggfSxcbiAgUVVBUlRFUjogeyBpZDogJ3F1YXJ0ZXInLCBuYW1lOiAnUXVhcnRlciBOb3RlcycsIHZhbHVlOiA0IH0sXG4gIEhBTEY6IHsgaWQ6ICdoYWxmJywgbmFtZTogJ0hhbGYgTm90ZXMnLCB2YWx1ZTogMiB9LFxuICBXSE9MRTogeyBpZDogJ3dob2xlJywgbmFtZTogJ1dob2xlIE5vdGVzJywgdmFsdWU6IDEgfVxufTtcblxuLyoqXG4gKiBQbGFjZWhvbGRlciBmb3IgZnV0dXJlIHF1YW50aXphdGlvbiBmdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCAtIFRoZSByYXcgbGVuZ3RoIHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gcXVhbnRTZXR0aW5ncyAtIFRoZSBxdWFudGl6YXRpb24gc2V0dGluZ3NcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBxdWFudGl6ZWQgbGVuZ3RoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUxlbmd0aChsZW5ndGgsIHF1YW50U2V0dGluZ3MgPSBRdWFudGl6YXRpb25TZXR0aW5ncy5OT05FKSB7XG4gIGlmIChxdWFudFNldHRpbmdzLmlkID09PSAnbm9uZScpIHtcbiAgICByZXR1cm4gbGVuZ3RoOyAvLyBObyBxdWFudGl6YXRpb25cbiAgfVxuICBcbiAgLy8gVGhpcyBpcyB3aGVyZSBjdXN0b20gcXVhbnRpemF0aW9uIGxvZ2ljIHdpbGwgZ28gaW4gdGhlIGZ1dHVyZVxuICAvLyBGb3Igbm93LCB3ZSdyZSBqdXN0IHJldHVybmluZyB0aGUgb3JpZ2luYWwgbGVuZ3RoXG4gIHJldHVybiBsZW5ndGg7XG59ICJdLCJuYW1lcyI6WyJNQUpPUl9TQ0FMRV9GUkVRVUVOQ0lFUyIsIk1BSk9SX1NDQUxFX05PVEVTIiwibWFwTGVuZ3RoVG9Ob3RlIiwibGVuZ3RoIiwibWluTGVuZ3RoIiwibWF4TGVuZ3RoIiwiY2xhbXBlZExlbmd0aCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJub3JtYWxpemVkUG9zIiwibm90ZUluZGV4IiwiZmxvb3IiLCJtYXBMZW5ndGhUb0ZyZXF1ZW5jeSIsIm5vdGUiLCJwbGF5Tm90ZUZvckxlbmd0aCIsImF1ZGlvQ29udGV4dCIsImR1cmF0aW9uIiwidm9sdW1lIiwid2F2ZWZvcm0iLCJmcmVxdWVuY3kiLCJvc2NpbGxhdG9yIiwiY3JlYXRlT3NjaWxsYXRvciIsImdhaW5Ob2RlIiwiY3JlYXRlR2FpbiIsInR5cGUiLCJzZXRWYWx1ZUF0VGltZSIsImN1cnJlbnRUaW1lIiwiZ2FpbiIsImV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJzdGFydCIsInN0b3AiLCJnZXROb3RlQ29sb3IiLCJpbmRleE9mIiwiaHVlIiwiaCIsInMiLCJsIiwiYyIsImFicyIsIngiLCJtIiwiciIsImciLCJiIiwicm91bmQiLCJRdWFudGl6YXRpb25TZXR0aW5ncyIsIk5PTkUiLCJpZCIsIm5hbWUiLCJ2YWx1ZSIsIkVJR0hUSCIsIlFVQVJURVIiLCJIQUxGIiwiV0hPTEUiLCJxdWFudGl6ZUxlbmd0aCIsInF1YW50U2V0dGluZ3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/midiSequencer.js\n");

/***/ })

};
;